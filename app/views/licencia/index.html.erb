<%= render 'form_licencia' %>
<%= javascript_include_tag "util.js" %>
<%= javascript_include_tag "daterangepicker"%>
<%= stylesheet_link_tag "daterangepicker-bs3" %>
<hr id="div_hr_horas"/>
<div id="div_horas" class="panel panel-info">
    <div class="panel-heading">
      <h3 class="panel-title">
        Horas
      </h3>
    </div>
    <div class="panel-body">
    <div class="table-responsive">
      <table id="tabla-horas-licencia" class="table table-striped table-bordered table-hover" data-source = "<%= altas_bajas_horas_licencia_permitida_path(format: :json, dni: 0) %>" >
        <thead>
          <tr>
            <th>Secuencia</th>
            <th>Establecimiento</th>
            <th>Ciclo</th>
            <th>Materia</th>
            <th>Año</th>
            <th>Div</th>
            <th>Turno</th>
            <th>Fecha Alta</th>
            <th class="text-center col-md-1">Acciones</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
  </div>
  </div>


  <hr id="div_hr_cargos"/>
  <div id="div_cargos" class="panel panel-info">
    <div class="panel-heading">
      <h3 class="panel-title">
        Cargos
      </h3>
    </div>
    <div class="panel-body">
    <div class="table-responsive">
      <table id="tabla-cargos-licencia" class="table table-striped table-bordered table-hover" data-source = "<%= cargos_licencia_permitida_path(format: :json,dni: 0) %>" >
        <thead>
          <tr>
            <th>Secuencia</th>
            <th>CJ</th>
            <th>Establecimiento</th>
            <th>Sit Rev / Cargo</th>
            <th>Turno</th>
            <th>Curso</th>
            <th>Div</th>
            <th>Observaciones</th>
            <th>Fecha Alta</th>
            <th class="text-center col-md-1">Acciones</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
  </div>
  </div>
  <hr/>

  <hr id="div_hr_cargos"/>
  <div id="div_cargos_no_docentes" class="panel panel-info">
    <div class="panel-heading">
      <h3 class="panel-title">
        Cargos Auxiliares
      </h3>
    </div>
    <div class="panel-body">
    <div class="table-responsive">
         <table id="tabla-cargos-no-docentes-licencia" class="table table-striped table-bordered table-hover" data-source = "<%= cargos_no_docentes_licencia_permitida_path(format: :json,dni: 0) %>" >
          <thead>
           <tr>
            <th>Secuencia</th>
            <th>Turno</th>
            <th>CJ</th>
            <th>Establecimiento</th>
            <th>Observaciones</th>
            <th>Fecha Alta</th>
            <th class="text-center col-md-1">Acciones</th>
           </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
  </div>
 </div>
  <hr/>

 <hr id="div_hr_licencias"/>
  <div id="div_licencias" class="panel panel-info">
    <div class="panel-heading">
      <h3 class="panel-title">
        Licencias
      </h3>
    </div>
    <div class="panel-body">
      <div class="table-responsive">
        <table id="tabla-licencium" class="table table-striped table-bordered table-hover" data-source = "<%= licencia_path(format: :json,dni: 0) %>" >
          <thead>
            <tr>
              <th>Establ.</th>
              <th>Tipo</th>
              <th>Sec.</th>
              <th>Turno</th>
              <th>Ciclo/Mat./Año/Div.</th>
              <th>Sit.Rev.</th>
              <th>Grupo</th>
              <th>Descrip.</th>
              <th style="width: 50px;">Fecha Desde</th>
              <th style="width: 50px;">Fecha Hasta</th>
              <th>Artículo</th>
              <th>Con Certificado</th>
              <th>Sin Formulario</th>
              <th class="text-center col-md-1">Estado</th>
              <th class="text-center col-md-1">Continuar</th>
              <th>Ver</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </div>
    </div>
  <hr/>






  <div class="modal fade" id="modal_licencia_horas" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Generar licencia horas</h4>
      </div>
      <div class="modal-body">
        <%= label_tag "Fecha Inicio", nil,  :class => "control-label" %>
        <%= text_field_tag 'input_fecha_inicio', Date.today %>
        <%= label_tag "Fecha Fin", nil,  :class => 'datepicker' %>
        <%= text_field_tag 'input_fecha_fin' %>
        <hr/>
        <% if (current_user.role? :licencia) || (current_user.role? :sadmin) then %>
         <div id="art_doc" >
           <%= label_tag "Seleccione que tipo de articulo le corresponde", nil,  :class => "control-label" %>
           <%= select_tag :art_doc_1, options_for_select([['Docente', "Docente"], ['Auxiliar', "Auxiliar"]], 0,), {:prompt => "Seleccione si es docente o auxiliar", :id => "art_doc_1"} %> 
         </div>

         <br>
         <div class="row">
          <%= select_tag "Articulo", options_from_collection_for_select(Articulo.joins(:tipo_articulo).where(tipo_articulos: {descripcion: "Docente"}), "id", :to_s_descripcion),:prompt => "Seleccionar articulo",:class => "form-control col-sm-6", :id => "select_articulo_horas" %>

          <%= select_tag "Articulo", options_from_collection_for_select(Articulo.joins(:tipo_articulo).where(tipo_articulos: {descripcion: "Auxiliar"}), "id", :to_s_descripcion),:prompt => "Seleccionar articulo",:class => "form-control col-sm-6", :id => "select_articulo_cargos_no_docente_h1" %>
         </div>


         </Br>
         <div id="alerta-dias" class="alert alert-info"> </div>
        <% else %>
         <div class="row">
          <%= select_tag "Articulo", options_from_collection_for_select(Articulo.joins(:tipo_articulo).where(tipo_articulos: {descripcion: "Docente"}), "id", :to_s_descripcion),:prompt => "Seleccionar articulooo",:class => "form-control col-sm-6", :id => "select_articulo_horas_esc" %>
          </div>
         </Br>
         <div id="alerta-dias" class="alert alert-info"> </div>
         <hr/>
        <% end %>

        <div id="con_certificado1" >
          <%= label_tag "Con Certificado", nil,  :class => "control-label" %>
          <%= check_box_tag 'con_certificado1' %>
        </div>

        <div id="con_formulario1" >
          <%= label_tag "Con formulario", nil,  :class => "control-label" %>
          <%= check_box_tag 'con_formulario1' %>
        </div>
        
        <div id="anio_lic" >
           <%= label_tag "Año de licencia (solo en casos de licencias anuales)", nil,  :class => "control-label" %>
           <%= select_tag :input_anio_lic, options_for_select([['2018', 2018],['2017', 2017], ['2016', 2016], ['2015', 2015], ['2014', 2014], ['2013', 2013], ['2012', 2012], ['2011', 2011], ['2010', 2010], ['2009', 2009], ['2008', 2008], ['2007', 2007], ['2006', 2006], ['2005', 2005], ['2003', 2003], ['2002', 2002], ['2001', 2001], ['2000', 2000], ['1999', 1999], ['1998', 1998], ['1997', 1997], ['1996', 1996], ['1995', 1995], ['1994', 1994], ['1993', 1993]], 0,), {:prompt => "Seleccionar fecha"} %> 
        </div>  
         <hr/>

        <div class="row">
        <%= select_tag "Escuela", options_from_collection_for_select(Establecimiento.all, "id", :to_s),:prompt => "Escuela destino",:class => "form-control col-sm-6", :id => "select_destino_horas" %>
        </div>

        <div id="disposicion" class="">
          <%= label_tag "Disposicion", nil,  :class => "control-label" %>
          <%= text_area_tag 'disposicion', nil, :class => "form-control col-sm-6" %>
        </div>

        <hr/>
        <div id="obv1" >
           <%= label_tag "Observaciones", nil,  :class => "control-label" %>
           <%= text_area_tag 'observaciones' , nil, :class => "form-control col-sm-6"%>
        </div>
        <hr/> 
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        <button type="button" id="btn_licencia_horas" class="btn btn-default" data-dismiss="modal">Guardar</button>
      </div>
    </div>
  </div>
</div>







  <div class="modal fade" id="modal_licencia_horas2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Generar licencia horas</h4>
      </div>
      <div class="modal-body">
        <%= label_tag "Prestador que certifica el cierre de la licencia anterior(si corresponde): ", nil,  :class => "control-label" %>
        <%= select_tag "prestador_2", options_from_collection_for_select(Prestador.all, "id", "nombre"), :prompt => "Seleccionar Prestador", id: "prestador_2", :style=>"width:100%" %>
        <hr style="border-color:#81BEF7; box-shadow: 6px 6px 6px black;"/>
        <%= label_tag "Fecha Inicio Nueva Licencia:", nil,  :class => "control-label" %>
        <%= text_field_tag 'input_fecha_inicio6', Date.today %>
        <br><br>
        <%= label_tag "Fecha Final Nueva Licencia:", nil,  :class => "control-label" %>
        <%= text_field_tag 'input_fecha_fin6'%>
        <hr style="border-color:#81BEF7; box-shadow: 6px 6px 6px black;"/>
        <% if (current_user.role? :licencia) || (current_user.role? :sadmin) then %>
         <br>
        <div id="art_doc" >
           <%= label_tag "Seleccione que tipo de articulo le corresponde", nil,  :class => "control-label" %>
           <%= select_tag :art_doc_2, options_for_select([['Docente', "Docente"], ['Auxiliar', "Auxiliar"]], 0,), {:prompt => "Seleccione si es docente o auxiliar", :id => "art_doc_2"} %> 
        </div>
        </Br>
        <div class="row">
        <%= select_tag "Articulo", options_from_collection_for_select(Articulo.joins(:tipo_articulo).where(tipo_articulos: {descripcion: "Docente"}), "id", :to_s_descripcion),:prompt => "Seleccionar articulo",:class => "form-control col-sm-6", :id => "select_articulo_horas_h2" %>
        <%= select_tag "Articulo", options_from_collection_for_select(Articulo.joins(:tipo_articulo).where(tipo_articulos: {descripcion: "Auxiliar"}), "id", :to_s_descripcion),:prompt => "Seleccionar articulo",:class => "form-control col-sm-6", :id => "select_articulo_cargos_no_docente_h2" %>
        </div>
        <hr/>
        <div id="alerta-dias-1" class="alert alert-info"> </div>
        <% else %>
         <div class="row">
          <%= select_tag "Articulo", options_from_collection_for_select(Articulo.joins(:tipo_articulo).where(tipo_articulos: {descripcion: "Docente"}), "id", :to_s_descripcion),:prompt => "Seleccionar articulo",:class => "form-control col-sm-6", :id => "select_articulo_horas_esc_1" %>
          </div>
         </Br>
         <div id="alerta-dias-1" class="alert alert-info"> </div>
        <% end %>

        <div id="con_certificado2" >
          <%= label_tag "Con Certificado", nil,  :class => "control-label" %>
          <%= check_box_tag 'con_certificado2' %>
        </div>

        <div id="con_formulario2" >
          <%= label_tag "Con formulario", nil,  :class => "control-label" %>
          <%= check_box_tag 'con_formulario2' %>
        </div>
        <div id="anio_lic_6" >
           <%= label_tag "Año de licencia (solo en casos de licencias anuales)", nil,  :class => "control-label" %>
           <%= select_tag :input_anio_lic_6, options_for_select([['2018', 2018],['2017', 2017], ['2016', 2016], ['2015', 2015], ['2014', 2014], ['2013', 2013], ['2012', 2012], ['2011', 2011], ['2010', 2010], ['2009', 2009], ['2008', 2008], ['2007', 2007], ['2006', 2006], ['2005', 2005], ['2003', 2003], ['2002', 2002], ['2001', 2001], ['2000', 2000], ['1999', 1999], ['1998', 1998], ['1997', 1997], ['1996', 1996], ['1995', 1995], ['1994', 1994], ['1993', 1993]], 0,), {:prompt => "Seleccionar fecha"} %> 
        </div>
      <br>
      <hr/>
        <div class="row">
        <%= select_tag "Escuela", options_from_collection_for_select(Establecimiento.all, "id", :to_s),:prompt => "Escuela destino",:class => "form-control col-sm-6", :id => "select_destino_horas_ag" %>
        </div>
        <hr/>

      <div id="obv2">
           <%= label_tag "Observaciones", nil,  :class => "control-label" %>
           <%= text_area_tag 'observaciones2', nil, :class => "form-control col-sm-6"%>
      </div>
      </br>
      </div> 
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        <button type="button" id="btn_licencia_horas2" class="btn btn-default" data-dismiss="modal">Guardar</button>
      </div>
    </div>
  </div>
</div>

 <div class="modal fade" id="modal_licencia_horas2_obs" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Agregar Observaciones</h4>
      </div>
      <div class="modal-body">
        
          <div id="obv2">
               <%= label_tag "Observaciones", nil,  :class => "control-label" %>
               <%= text_area_tag 'observaciones12', nil, :class => "form-control col-sm-6"%>
          </div>
          </br>
         
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
            <button type="button" id="btn_editar_obs" class="btn btn-default" data-dismiss="modal">Guardar</button>
          </div>
        </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modal_licencia_cargos2_obs" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Agregar Observaciones</h4>
      </div>
      <div class="modal-body">
        
        <div id="obv2">
             <%= label_tag "Observaciones", nil,  :class => "control-label" %>
             <%= text_area_tag 'observaciones11', nil, :class => "form-control col-sm-6"%>
        </div>
        </br>
       
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
          <button type="button" id="btn_editar_obs2" class="btn btn-default" data-dismiss="modal">Guardar</button>
        </div>
        </div>
    </div>
  </div>
</div>

 <div class="modal fade" id="modal_licencia_cargos_no_docentes2_obs" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Agregar Observaciones</h4>
      </div>
      <div class="modal-body">
        
        <div id="obv2">
             <%= label_tag "Observaciones", nil,  :class => "control-label" %>
             <%= text_area_tag 'observaciones10', nil, :class => "form-control col-sm-6"%>
        </div>
        </br>
       
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
          <button type="button" id="btn_editar_obs3" class="btn btn-default" data-dismiss="modal">Guardar</button>
        </div>
      </div>
    </div>
  </div>
</div>




<div class="modal fade" id="modal_licencia_cargos" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Generar licencia cargos</h4>
        ACAA
      </div>
      <div class="modal-body">
        <%= label_tag "Fecha Inicio", nil,  :class => "control-label" %>
        <%= text_field_tag 'input_fecha_inicio2', Date.today %>
        <%= label_tag "Fecha Fin", nil,  :class => "control-label" %>
        <%= text_field_tag 'input_fecha_fin2'%>
        <hr/>
        <div class="row">
          <%= select_tag "Articulo", options_from_collection_for_select(Articulo.joins(:tipo_articulo).where(tipo_articulos: {descripcion: "Docente"}), "id", :to_s_descripcion),:prompt => "Seleccionar articulo",:class => "form-control col-sm-6", :id => "select_articulo_cargos" %>
        </div>
        <div id="con_certificado6" >
          <%= label_tag "Con Certificado", nil,  :class => "control-label" %>
          <%= check_box_tag 'con_certificado6' %>
        </div>

        <div id="con_formulario6" >
          <%= label_tag "Con formulario", nil,  :class => "control-label" %>
          <%= check_box_tag 'con_formulario6' %>
        </div>
        <hr/>
        <div id="alerta-dias-cargo" class="alert alert-info"></div>
        <div id="anio_lic_1" >
           <%= label_tag "Año de licencia (solo en casos de licencias anuales)", nil,  :class => "control-label" %>
           <%= select_tag :input_anio_lic_1, options_for_select([['2018', 2018],['2017', 2017], ['2016', 2016], ['2015', 2015], ['2014', 2014], ['2013', 2013], ['2012', 2012], ['2011', 2011], ['2010', 2010], ['2009', 2009], ['2008', 2008], ['2007', 2007], ['2006', 2006], ['2005', 2005], ['2003', 2003], ['2002', 2002], ['2001', 2001], ['2000', 2000], ['1999', 1999], ['1998', 1998], ['1997', 1997], ['1996', 1996], ['1995', 1995], ['1994', 1994], ['1993', 1993]], 0,), {:prompt => "Seleccionar fecha"} %> 
        </div>
        <div class="row">
        <%= select_tag "Escuela", options_from_collection_for_select(Establecimiento.all, "id", :to_s),:prompt => "Escuela destino",:class => "form-control col-sm-6", :id => "select_destino_cargos" %>
        </div>

      <div id="disposicion3">
          <%= label_tag "Disposicion", nil,  :class => "control-label" %>
          <%= text_area_tag 'disposicion3', nil, :class => "form-control col-sm-6" %>
      </div>
       <div id="obv3">
           <%= label_tag "Observaciones", nil,  :class => "control-label" %>
           <%= text_area_tag 'observaciones3', nil, :class => "form-control col-sm-6"%>
       </div>
       </br>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        <button type="button" id="btn_licencia_cargos" class="btn btn-default" data-dismiss="modal">Guardar</button>
      
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modal_licencia_cargos2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Generar licencia cargos</h4>
      </div>
      <div class="modal-body">
        <%= label_tag "Prestador que certifica el cierre de la licencia anterior(si corresponde): ", nil,  :class => "control-label" %>
        <%= select_tag "prestador_3", options_from_collection_for_select(Prestador.all, "id", "nombre"), :prompt => "Seleccionar Prestador", id: "prestador_3", :style=>"width:100%" %>
        <hr style="border-color:#81BEF7; box-shadow: 6px 6px 6px black;"/>
        <%= label_tag "Fecha Inicio Nueva Licencia:", nil,  :class => "control-label" %>
        <%= text_field_tag 'input_fecha_inicio7', Date.today %>
        <br><br>
        <%= label_tag "Fecha Final Nueva Licencia:", nil,  :class => "control-label" %>
        <%= text_field_tag 'input_fecha_fin7'%>
        <hr style="border-color:#81BEF7; box-shadow: 6px 6px 6px black;"/>
        <div class="row">
          <%= select_tag "Articulo", options_from_collection_for_select(Articulo.joins(:tipo_articulo).where(tipo_articulos: {descripcion: "Docente"}), "id", :to_s_descripcion),:prompt => "Seleccionar articulo de la nueva licencia",:class => "form-control col-sm-6", :id => "select_articulo_cargos7" %>
      </div>
        <hr/>
        <div id="alerta-dias-cargo-1" class="alert alert-info"></div>
             <div id="anio_lic_7" >
           <%= label_tag "Año de licencia (solo en casos de licencias anuales)", nil,  :class => "control-label" %>
           <%= select_tag :input_anio_lic_7, options_for_select([['2018', 2018],['2017', 2017], ['2016', 2016], ['2015', 2015], ['2014', 2014], ['2013', 2013], ['2012', 2012], ['2011', 2011], ['2010', 2010], ['2009', 2009], ['2008', 2008], ['2007', 2007], ['2006', 2006], ['2005', 2005], ['2003', 2003], ['2002', 2002], ['2001', 2001], ['2000', 2000], ['1999', 1999], ['1998', 1998], ['1997', 1997], ['1996', 1996], ['1995', 1995], ['1994', 1994], ['1993', 1993]], 0,), {:prompt => "Seleccionar fecha"} %> 
        </div>
        <div class="row">
        <%= select_tag "Escuela", options_from_collection_for_select(Establecimiento.all, "id", :to_s),:prompt => "Escuela destino",:class => "form-control col-sm-6", :id => "select_destino_cargos2" %>
        </div>

        <div id="con_certificado7" >
          <%= label_tag "Con Certificado", nil,  :class => "control-label" %>
          <%= check_box_tag 'con_certificado7' %>
        </div>

        <div id="con_formulario7" >
          <%= label_tag "Con formulario", nil,  :class => "control-label" %>
          <%= check_box_tag 'con_formulario7' %>
        </div>
           <div id="obv4">
           <%= label_tag "Observaciones", nil,  :class => "control-label" %>
           <%= text_area_tag 'observaciones4', nil, :class => "form-control col-sm-6"%>
       </div>
       </br>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        <button type="button" id="btn_licencia_cargos2" class="btn btn-default" data-dismiss="modal">Guardar</button>
      
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="modal_licencia_cargos_no_docentes" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Generar licencia cargos auxiliares</h4>
      </div>
      <div class="modal-body">
        <%= label_tag "Fecha Inicio", nil,  :class => "control-label" %>
        <%= text_field_tag 'input_fecha_inicio4', Date.today %>
        <%= label_tag "Fecha Fin", nil,  :class => "control-label" %>
        <%= text_field_tag 'input_fecha_fin4'%>
        <hr/>
        <div class="row">
          <%= select_tag "Articulo", options_from_collection_for_select(Articulo.joins(:tipo_articulo).where(tipo_articulos: {descripcion: "Auxiliar"}), "id", :to_s_descripcion),:prompt => "Seleccionar articulo",:class => "form-control col-sm-6", :id => "select_articulo_cargos_no_docente" %>
        </div>
        <hr/>
        <div id="alerta-dias-cargo-no-docentes" class="alert alert-info"></div>
        <div id="anio_lic_2" >
           <%= label_tag "Año de licencia (solo en casos de licencias anuales)", nil,  :class => "control-label" %>
           <%= select_tag :input_anio_lic_2, options_for_select([['2018', 2018],['2017', 2017], ['2016', 2016], ['2015', 2015], ['2014', 2014], ['2013', 2013], ['2012', 2012], ['2011', 2011], ['2010', 2010], ['2009', 2009], ['2008', 2008], ['2007', 2007], ['2006', 2006], ['2005', 2005], ['2003', 2003], ['2002', 2002], ['2001', 2001], ['2000', 2000], ['1999', 1999], ['1998', 1998], ['1997', 1997], ['1996', 1996], ['1995', 1995], ['1994', 1994], ['1993', 1993]], 0,), {:prompt => "Seleccionar fecha"} %> 
        </div>
        <div class="row">
         <%= select_tag "Escuela", options_from_collection_for_select(Establecimiento.all, "id", :to_s),:prompt => "Escuela destino",:class => "form-control col-sm-6", :id => "select_destino_car_aux" %>
        </div>
        <div id="con_certificado8" >
          <%= label_tag "Con Certificado", nil,  :class => "control-label" %>
          <%= check_box_tag 'con_certificado8' %>
        </div>

        <div id="con_formulario8" >
          <%= label_tag "Con formulario", nil,  :class => "control-label" %>
          <%= check_box_tag 'con_formulario8' %>
        </div>
        </br>
          <div id="obv5">
           <%= label_tag "Observaciones", nil,  :class => "control-label" %>
           <%= text_area_tag 'observaciones5', nil, :class => "form-control col-sm-6"%>
       </div>
       </br>     
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        <button type="button" id="btn_licencia_cargos_no_docentes" class="btn btn-default" data-dismiss="modal">Guardar</button>
      
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modal_licencia_cargos_no_docentes2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Generar licencia cargos auxiliares</h4>
      </div>
      <div class="modal-body">
          <%= label_tag "Prestador que certifica el cierre de la licencia anterior(si corresponde): ", nil,  :class => "control-label" %>
          <%= select_tag "prestador_4", options_from_collection_for_select(Prestador.all, "id", "nombre"), :prompt => "Seleccionar Prestador", id: "prestador_4", :style=>"width:100%" %>
        <hr style="border-color:#81BEF7; box-shadow: 6px 6px 6px black;"/>
        <%= label_tag "Fecha Inicio Nueva Licencia: ", nil,  :class => "control-label" %>
        <%= text_field_tag 'input_fecha_inicio8', Date.today %>
        <br><br>
        <%= label_tag "Fecha Final Nueva Licencia: ", nil,  :class => "control-label" %>
        <%= text_field_tag 'input_fecha_fin8'%>
        <hr style="border-color:#81BEF7; box-shadow: 6px 6px 6px black;"/>
        <div class="row">
          <%= select_tag "Articulo", options_from_collection_for_select(Articulo.joins(:tipo_articulo).where(tipo_articulos: {descripcion: "Auxiliar"}), "id", :to_s_descripcion),:prompt => "Seleccionar articulo",:class => "form-control col-sm-6", :id => "select_articulo_cargos_no_docente8" %>
        </div>
        <hr/>
        <div id="alerta-dias-cargo-no-docentes-1" class="alert alert-info"></div>
        <div id="anio_lic_8" >
           <%= label_tag "Año de licencia (solo en casos de licencias anuales)", nil,  :class => "control-label" %>
           <%= select_tag :input_anio_lic_8, options_for_select([['2018', 2018],['2017', 2017], ['2016', 2016], ['2015', 2015], ['2014', 2014], ['2013', 2013], ['2012', 2012], ['2011', 2011], ['2010', 2010], ['2009', 2009], ['2008', 2008], ['2007', 2007], ['2006', 2006], ['2005', 2005], ['2003', 2003], ['2002', 2002], ['2001', 2001], ['2000', 2000], ['1999', 1999], ['1998', 1998], ['1997', 1997], ['1996', 1996], ['1995', 1995], ['1994', 1994], ['1993', 1993]], 0,), {:prompt => "Seleccionar fecha"} %> 
        </div>
          <div class="row">
         <%= select_tag "Escuela", options_from_collection_for_select(Establecimiento.all, "id", :to_s),:prompt => "Escuela destino",:class => "form-control col-sm-6", :id => "select_destino_car_aux_2" %>
        </div>
        <div id="con_certificado9" >
          <%= label_tag "Con Certificado", nil,  :class => "control-label" %>
          <%= check_box_tag 'con_certificado9' %>
        </div>

        <div id="con_formulario9" >
          <%= label_tag "Con formulario", nil,  :class => "control-label" %>
          <%= check_box_tag 'con_formulario9' %>
        </div>
        </br>
          <div id="obv6">
           <%= label_tag "Observaciones", nil,  :class => "control-label" %>
           <%= text_area_tag 'observaciones6', nil, :class => "form-control col-sm-6"%>
       </div>
       </br>     
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        <button type="button" id="btn_licencia_cargos_no_docentes2" class="btn btn-default" data-dismiss="modal">Guardar</button>
      
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="modal_licencia_final" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Generar licencia final</h4>
      </div>
      <div class="modal-body">
        <%= label_tag "Fecha Inicio", nil,  :class => "control-label" %>
        <%= text_field_tag 'input_fecha_inicio3' %>
        <%= label_tag "Fecha Fin", nil,  :class => "control-label" %>
        <%= text_field_tag 'input_fecha_fin3' %>
        <%= label_tag "Cierre por baja", nil,  :class => "control-label" %>
        <%= check_box_tag 'por_baja' %>
        <br>
        <%= label_tag "Prestador que certifica la licencia: ", nil,  :class => "control-label" %>
        <%= select_tag "prestador", options_from_collection_for_select(Prestador.all, "id", "nombre"), :prompt => "Seleccionar Prestador", id: "prestador"%>
        <br>
        <div id="con_certificado5">
          <%= label_tag "Con Certificado", nil,  :class => "control-label" %>
          <%= check_box_tag 'con_certificado5' %>
        </div>

        <div id="con_formulario5" >
          <%= label_tag "Con formulario", nil,  :class => "control-label" %>
          <%= check_box_tag 'con_formulario5' %>
        </div>
        <br>
        <%= label_tag "Observaciones", nil,  :class => "control-label" %>
        <%= text_area_tag 'observaciones_final', nil, :class => "form-control col-sm-6"%>
      </div>
      <br/>
      <div class="modal-footer">
        <button type="button" id="btn_editar_com" class="btn btn-default" data-dismiss="modal">Editar Comentario</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        <button type="button" id="btn_licencia_final" class="btn btn-default" data-dismiss="modal">Finalizar licencia</button>
        <button type="button" id="btn_cancelar" class="btn btn-default" data-dismiss="modal">Cancelar licencia</button>
      
      </div>
    </div>
  </div>
</div>



  

<% @listado_de_datepickers = ['input_fecha_inicio', 'input_fecha_fin', 'input_fecha_inicio2', 'input_fecha_fin2','input_fecha_inicio4','input_fecha_fin4','input_fecha_inicio3','input_fecha_fin3','input_fecha_inicio5','input_fecha_inicio8','input_fecha_fin8','input_fecha_inicio6','input_fecha_fin6','input_fecha_inicio7','input_fecha_fin7'] %>

<% @listado_de_datepickers.each do |l| %>


  <script type="text/javascript">
      
        $("#<%=l%>").datepicker({
         dateFormat: 'dd-mm-yy', 
                dayNames: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sabado'], 
                dayNamesMin: ['D', 'L', 'M', 'X', 'J', 'V', 'S'], 
                dayNamesShort: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'], 
                firstDay: 1, 
                monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'], 
                monthNamesShort: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'], 
                changeYear: true,
                changeMonth: true,
                yearRange: '-100:+0',
          });

  </script>

<% end %>

<script type="text/javascript">
  var traslado_definitivos = [394, 395];

  $(document).ready(function() {
    $("#select_articulo_horas").hide();
    $("#select_articulo_cargos_no_docente_h1").hide();
    $("#select_articulo_cargos_no_docente_h2").hide();
    $('select#prestador').select2();
    $("#select_destino_cargos").hide();
    $("#select_destino_cargos2").hide();

    $("#select_destino_horas").hide();
    $("#select_destino_horas_ag").hide();
    $("#select_destino_horas2").hide();

    $("#select_destino_car_aux").hide();
    $("#select_destino_car_aux_2").hide();

    $("#select_articulo_horas_h2").hide();
    $("#art_doc_1").val("");
    $("#art_doc_2").val("");

    $("#con_certificado1").hide();
    $("#con_certificado2").hide();
    $("#con_certificado3").hide();
    $("#con_certificado4").hide();
    $("#con_certificado6").hide();
    $("#con_certificado7").hide();
    $("#con_certificado8").hide();
    $("#con_certificado9").hide();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
    $("#disposicion").hide();
    $("#disposicion3").hide();

    var id_horas;
    var id_cargos;
    var id_cargos_no_docentes;
    $("#div_horas").hide();
    $("#div_cargos").hide();
    $("#div_hr_horas").hide();
    $("#div_hr_cargos").hide();
    $("#div_hr_horas").hide();
    $("#div_cargos_no_docentes").hide();
    $("#div_hr_licencias").hide();
    $("#div_licencias").hide();
    $("#alerta-dias").hide();
    $("#alerta-dias-1").hide();
    $("#anio_lic").hide();
    $("#obv1").hide();
    $("#obv2").hide();
    $("#obv3").hide();
    $("#obv4").hide();
    $("#obv5").hide();
    $("#obv6").hide();
    $("#anio_lic_1").hide();
    $("#anio_lic_2").hide();
    $("#anio_lic_3").hide();
    $("#anio_lic_4").hide();
    $("#anio_lic_5").hide();
    $("#anio_lic_6").hide();  
    $("#anio_lic_7").hide();  
    $("#anio_lic_8").hide(); 
    $("#alerta-dias-cargo").hide();
    $("#alerta-dias-cargo-1").hide();
    $("#alerta-dias-cargo-no-docentes").hide();
    $("#alerta-dias-cargo-no-docentes-1").hide();
    $("#select_destino_horas").hide();
    $("#select_destino_horas_ag").hide();
    $("#select_destino_horas2").hide();

    $('select#select_articulo_cargos_no_docente').select2();

  });


  $('#input_fecha_inicio').change(function(){
    $('#input_fecha_fin').datepicker('option','minDate',$('#input_fecha_inicio').val());
  });

  $('#input_fecha_inicio2').change(function(){
    $('#input_fecha_fin2').datepicker('option','minDate',$('#input_fecha_inicio2').val());
  });

  $('#input_fecha_inicio3').change(function(){
    $('#input_fecha_fin3').datepicker('option','minDate',$('#input_fecha_inicio3').val());
  });

  $('#input_fecha_inicio6').change(function(){
    $('#input_fecha_fin6').datepicker('option','minDate',$('#input_fecha_inicio6').val());
  });
     $('#input_fecha_inicio7').change(function(){
    $('#input_fecha_fin7').datepicker('option','minDate',$('#input_fecha_inicio7').val());
  });
     $('#input_fecha_inicio8').change(function(){
    $('#input_fecha_fin8').datepicker('option','minDate',$('#input_fecha_inicio8').val());
  }); 

  var tabla_licencia = $('#tabla-licencium').dataTable({
    language : {"sUrl": "<%= asset_path('language.es.json') %>",},
    processing : true,
    serverSide : true,


    ajax : $('#tabla-licencium').data('source'),
    pagingType: "simple",
    retrieve: true,
    columnDefs: [
            {
                "targets": [ 15 ],
                "searchable": false,
                "orderable": false
            }
        ]

  });

  var tabla_personas = $('#tabla-persona').dataTable({
    language : {"sUrl": "<%= asset_path('language.es.json') %>",},
    processing : true,
    serverSide : true,
    ajax : $('#tabla-persona').data('source'),
    pagingType: "simple",
    retrieve: true,
    columnDefs: [
            {
                "targets": [ 7 ],
                "searchable": false,
                "orderable": false
            }
        ]

  });

  var tabla_horas_licencia =  $('#tabla-horas-licencia').dataTable({
    language : {"sUrl": "<%= asset_path('language.es.json') %>",},
    processing : true,
    serverSide : true,
    ajax : $('#tabla-horas-licencia').data('source'),
    pagingType: "simple",
    retrieve: true,
    columnDefs: [
            {
                "targets": [ 8 ],
                "searchable": false,
                "orderable": false
            }
        ]
   
  });

  var tabla_cargos_licencia = $('#tabla-cargos-licencia').dataTable({
    language : {"sUrl": "<%= asset_path('language.es.json') %>",},
    processing : true,
    serverSide : true,
    ajax : $('#tabla-cargos-licencia').data('source'),
    pagingType: "simple",
    retrieve: true,
    columnDefs: [
            {
                "targets": [ 9 ],
                "searchable": false,
                "orderable": false
            }
        ]
   
  });

  var tabla_cargos_no_docentes_licencia = $('#tabla-cargos-no-docentes-licencia').dataTable({
    language : {"sUrl": "<%= asset_path('language.es.json') %>",},
    processing : true,
    serverSide : true,
    ajax : $('#tabla-cargos-no-docentes-licencia').data('source'),
    pagingType: "simple",
    retrieve: true,
    columnDefs: [
            {
                "targets": [ 6 ],
                "searchable": false,
                "orderable": false
            }
        ]
   
  });




  var tabla_personal_activo = $('#tabla-personal-activo')
    .on('draw.dt', function () {
      $('.popup-fecha')
        .on('save', function(e, params) {
          tabla_personal_activo.api().ajax.reload();
          //tabla_bajas_efectivas.api().ajax.reload();
        })
        .editable({
          savenochange: true,
          success: function(response, newValue) {
            if(response.status == 'error') return response.msg; //msg will be shown in editable form
          }
        });
    })
    .dataTable({
      language : {"sUrl": "<%= asset_path('language.es.json') %>",},
      processing: true,
      serverSide: true,
      ajax : $('#tabla-personal-activo').data('source'),
      pagingType: "simple",
      "pageLength": 5,
      columnDefs: [
            {
                "targets": [ 10 ],
                "searchable": false,
                "orderable": false
            }
        ]
    });


    $('#btn_buscar_persona').on('click', function() { //Trigger search button click event
      var id = parseInt($("#persona_id").val());
      $.ajax({
            url: '/soft/snpe/util/buscar_persona_por_id/'+id,
            type: 'POST',
          })
            .done(function(data) {
              window.dni = data.nro_documento
              $("#div_horas").show();
              $("#div_cargos").show();
              $("#div_hr_horas").show();
              $("#div_hr_cargos").show();
              $("#div_hr_horas").show();
              $("#div_cargos_no_docentes").show();
              $("#div_hr_licencias").show();
              $("#div_licencias").show();
              $("#div_personas").show();
              $("#div_hr_personas").show();
              
              tabla_horas_licencia.api().ajax.url('/soft/snpe/licencia/altas_bajas_horas_licencia_permitida/'+window.dni);
              tabla_cargos_licencia.api().ajax.url('/soft/snpe/licencia/cargos_licencia_permitida/'+window.dni);
              tabla_cargos_no_docentes_licencia.api().ajax.url('<%= cargos_no_docentes_licencia_permitida_path %>?dni='+window.dni);
              tabla_licencia.api().ajax.url('/soft/snpe/licencia/licencia_dadas/'+window.dni);

              tabla_horas_licencia.api().ajax.reload();
              tabla_cargos_licencia.api().ajax.reload();
              tabla_cargos_no_docentes_licencia.api().ajax.reload();
              tabla_licencia.api().ajax.reload();
              tabla_personas.api().ajax.reload();
        })
      });


  //--------------------------------Horas------------------------------------
 
  $('#modal_licencia_horas').on('shown.bs.modal', function (event) {      
      id_horas = $(event.relatedTarget).attr('id_horas');
      $("#art_doc_1" ).val("");
      $("#select_articulo_horas_esc").val(""); 
      $("textarea#disposicion").val("");
      $("#disposicion").hide();
      $("#observaciones" ).val("");
      $('#con_formulario1').show();
      $('input:checkbox').removeAttr('checked');

    });


    $('#modal_licencia_horas').on('hidden.bs.modal', function (e) {
      $("#alerta-dias").hide();
      $("#anio_lic").hide();
      $("#select_articulo_horas").hide();
      $("#select_articulo_cargos_no_docente_h1").hide();
      $("#art_doc_1" ).val("");
      $("#obv1" ).hide();
      $("#select_articulo_cargos_no_docente_h1").val("");
      $("#s2id_select_articulo_cargos_no_docente").val("");
      $('#con_certificado1').hide();
      $('input:checkbox').removeAttr('checked');

    });


  $('#btn_licencia_horas').on('click', function () {
      var articulo = "";
      fecha_inicio = $("#input_fecha_inicio").val();
      fecha_fin = $("#input_fecha_fin").val();
      observaciones = $("#observaciones" ).val();

      con_certificado = $("#con_certificado1:checked").val();
      con_formulario =  $("#con_formulario1:checked").val();
      fecha_anio_lic = $("#input_anio_lic").val();
      destino = $("#select_destino_horas").val();
      disposicion = $("textarea#disposicion").val();

      if (($("#select_articulo_horas").val() != "") && $("#select_articulo_horas").val() != undefined)
      {
      articulo = $("#select_articulo_horas").val();
      }
      if(($("#select_articulo_cargos_no_docente_h1").val() != "") && $("#select_articulo_cargos_no_docente_h1").val() != undefined)
      {        
      articulo = $("#select_articulo_cargos_no_docente_h1").val();
      }
      if(($("#select_articulo_horas_esc").val() != "") && $("#select_articulo_horas_esc").val() != undefined)
      {
      articulo = $("#select_articulo_horas_esc").val();
      }
      
      if (fecha_inicio == ""){
        alert("Debe seleccionar una fecha de inicio");
        return; 
      }  
      if (articulo == ""){
        alert("Debe seleccionar un Artículo");
        return; 
      }
      if((jQuery.inArray(parseInt(articulo), traslado_definitivos) !== -1) && disposicion ===""){
          alert("Campo disposicion no puede estar vacio.");
          return;
      }
        
      $.ajax({
          url: '/soft/snpe/licencia/guardar_licencia_horas/?id_horas='+id_horas+'&fecha_inicio='+fecha_inicio+'&fecha_fin='+fecha_fin+'&articulo='+articulo+'&fecha_anio_lic='+fecha_anio_lic+"&destino="+destino+"&observaciones="+observaciones+"&con_certificado="+con_certificado+"&con_formulario="+con_formulario+"&disposicion="+disposicion,
          type: 'POST',
        })
      .done(function(data) {
        tabla_horas_licencia.api().ajax.url('/soft/snpe/licencia/altas_bajas_horas_licencia_permitida/'+window.dni); 
        tabla_horas_licencia.api().ajax.reload();
        tabla_licencia.api().ajax.url('/soft/snpe/licencia/licencia_dadas/'+window.dni); 
        tabla_licencia.api().ajax.reload();
        $("#select_articulo_horas" ).val("");
        $("#input_anio_lic" ).val("");
        $("#select_articulo_cargos_no_docente_h1").val("");
        $("#select_articulo_horas_esc").val("");
        $("#anio_lic").val("");
        $("#art_doc_1").val("");
        $("textarea#disposicion").val("");
        if (data != "") {
          alert(data); 
        };
      })
    });


 $("#art_doc_1" ).change(function() {
    art_doc_1 = $("#art_doc_1").val();
     $("#alerta-dias").val("");
      if (art_doc_1 == "Docente"){
         $("#obv1").show();
         $("#select_articulo_horas").show();
         $("#select_articulo_cargos_no_docente_h1").hide();
         $("#select_articulo_horas_esc").hide();
         $("#select_articulo_horas_esc").val("");
         $("#select_articulo_cargos_no_docente_h1").val("");
         $("#s2id_select_articulo_cargos_no_docente").val("");
         $("#observaciones").val("");
         }
        if (art_doc_1 == "Auxiliar"){
         $("#obv1").show();
         $("#select_articulo_cargos_no_docente_h1").show(); 
         $("#select_articulo_cargos_no_docente_h1").val("");
         $("#select_articulo_horas").hide();
         $("#select_articulo_horas_esc").val("");
         $("#select_articulo_horas").val("");
         $("#select_articulo_horas_esc").hide();
         $("#observaciones").val("");
          }
         if (art_doc_1 == ""){
         $("#obv1").show();
         $("#select_articulo_horas").hide();
         $("#select_articulo_horas_esc").hide();
         $("#select_articulo_horas_esc").val("");
         $("#select_articulo_cargos_no_docente_h1").hide();
         $("#select_articulo_cargos_no_docente_h1").val("");
         $("#select_articulo_horas").val("");
         $("#input_anio_lic" ).val("");
         $("#art_doc_1").val("");
         $("#observaciones").val("");
          }        
  });


  $("#select_articulo_horas" ).change(function() {

    var id_articulo = parseInt($("#select_articulo_horas option:selected").val(),10);
    $.ajax({
      url: '/soft/snpe/licencia/buscar_articulo_dias_hora/'+id_articulo+'/'+id_horas,
      type: 'GET',
      })
        .done(function(data) {
        $("#alerta-dias").html("Cantidad máxima de días en este artículo: "+data);
        $("#alerta-dias").show();
        var myarray = [394,395,352,353, 354, 355, 356, 357, 358, 359, 360, 378];
        var vacaciones = [241,289,365,366]
        var art_medicos = [242,243,244,245,263,264,265,266,291,292,293,294,321,322,323,324,325]

        if(jQuery.inArray(id_articulo, art_medicos) !== -1){
          $('input:checkbox').removeAttr('checked');
          $('#con_certificado1').show();
        }else{

          $('input:checkbox').removeAttr('checked');
          $('#con_certificado1').hide();

        }

        if(jQuery.inArray(id_articulo, vacaciones) !== -1){
          $("#anio_lic").show();
          $("#input_anio_lic" ).val(""); 
        }
        else{ 
          $("#anio_lic").hide();
          }
        if(jQuery.inArray(id_articulo, myarray) !== -1){
            $("#select_destino_horas").show();
        }
        else{
            $("#select_destino_horas").hide();
        }
        if (id_articulo != null ){
            $("#obv1").show();
        }else{
          $("#obv1").hide();
        } 
      }) 
  });

    $("#select_articulo_horas_esc").change(function() {

    var id_articulo = parseInt($("#select_articulo_horas_esc option:selected").val(),10);
    $.ajax({
      url: '/soft/snpe/licencia/buscar_articulo_dias_hora/'+id_articulo+'/'+id_horas,
      type: 'GET',
      })
        .done(function(data) {
        $("#alerta-dias").html("Cantidad máxima de días en este artículo: "+data);
        $("#alerta-dias").show();
        var myarray = [394,395,352,353, 354, 355, 356, 357, 358, 359, 360, 378];
        var vacaciones = [241,289,365,366];
        var art_medicos = [242,243,244,245,263,264,265,266,291,292,293,294,321,322,323,324,325];

        $('#disposicion').hide();          
        if(jQuery.inArray(id_articulo, traslado_definitivos) !== -1){
          $('#disposicion').show();
        }

        if(jQuery.inArray(id_articulo, art_medicos) !== -1){
          $('input:checkbox').removeAttr('checked');
          $('#con_certificado2').show();
        }else{

          $('input:checkbox').removeAttr('checked');
          $('#con_certificado2').hide();
        }

        if(jQuery.inArray(id_articulo, vacaciones) !== -1){
          $("#anio_lic").show();
          $("#input_anio_lic" ).val(""); 
        }
        else{
          $("#anio_lic").hide();
          }
          if(jQuery.inArray(id_articulo, myarray) !== -1){
            $("#select_destino_horas").show();
          }
          else{
              $("#select_destino_horas").hide();
            }
            if (id_articulo != null ){
              $("#obv1").show();
            }
            else{
              $("#obv1").hide();
            } 
        }) 
  });

   $("#select_articulo_cargos_no_docente_h1" ).change(function() {

    var id_articulo = parseInt($("#select_articulo_cargos_no_docente_h1 option:selected").val(),10);
    $.ajax({
      url: '/soft/snpe/licencia/buscar_articulo_dias_hora/'+id_articulo+'/'+id_horas,
      type: 'GET',
      })
        .done(function(data) {
        $("#alerta-dias").html("Cantidad máxima de días en este artículo: "+data);
        $("#alerta-dias").show();
        var myarray = [394,395,352,353, 354, 355, 356, 357, 358, 359, 360, 378];
        var vacaciones = [241,289,365,366]
        var art_medicos = [242,243,244,245,263,264,265,266,291,292,293,294,321,322,323,324,325]

        $('#disposicion').hide();          
          if(jQuery.inArray(id_articulo, traslado_definitivos) !== -1){
          $('#disposicion').show();
        }
        if(jQuery.inArray(id_articulo, art_medicos) !== -1){
          $('input:checkbox').removeAttr('checked');
          $('#con_certificado3').show();
        }else{

          $('input:checkbox').removeAttr('checked');
          $('#con_certificado3').hide();
        }

        if(jQuery.inArray(id_articulo, vacaciones) !== -1){
          $("#anio_lic").show();
          $("#input_anio_lic" ).val(""); 
        }
        else{
          $("#anio_lic").hide();
          }
          if(jQuery.inArray(id_articulo, myarray) !== -1){
            $("#select_destino_horas").show();
          }
          else{
              $("#select_destino_horas").hide();
            }
            if (id_articulo != null ){
              $("#obv1").show();
            }
            else{
              $("#obv1").hide();
            } 
        }) 
         
  });

//-------------------------------------------Modal Horas 1 Fin--------------------------------------------------------------------
//-------------------------------------------Modal Horas 2    --------------------------------------------------------------------
  
  $('#modal_licencia_horas2_obs').on('shown.bs.modal', function (event) {      
      id_lic = $(event.relatedTarget).attr('id_lic');
      $("#observaciones12").val($(event.relatedTarget).attr('observaciones'));
      $('input:checkbox').removeAttr('checked');
      $('#con_formulario2').show();
      $('#con_certificado2').hide();

    });


  $('#modal_licencia_horas2').on('shown.bs.modal', function (event) {      
      id_horas = $(event.relatedTarget).attr('id_horas');
      $('input:checkbox').removeAttr('checked');
      $('#con_formulario2').show();
      $('#con_certificado2').hide();
      $('input:checkbox').removeAttr('checked');
    });

    $('#modal_licencia_horas2').on('hidden.bs.modal', function (e) {
    $('input:checkbox').removeAttr('checked');
    $("#alerta-dias-1").hide();
    $("#anio_lic_6").hide();
    $("#select_articulo_horas6" ).val("");
    $("#select_articulo_horas_h2" ).hide();
    $("#select_articulo_cargos_no_docente_h2").hide();
    $("#art_doc_2" ).val("");
    $("#select_articulo_horas_esc_1").val("");
    $("#prestador_2").val("");
    $("#obv2" ).hide();
    $("#observaciones2").val("");
    $("#select_destino_horas_ag").hide();
    $('#con_certificado2').hide();
    $('#con_formulario2').hide();
    $('input:checkbox').removeAttr('checked');
  });
 

  $('#btn_licencia_horas2').on('click', function () {
      fecha_inicio = $("#input_fecha_inicio6").val();
      fecha_fin = $("#input_fecha_fin6").val();
      fecha_anio_lic = $("#input_anio_lic_6").val();
      prestador_2 = $("#prestador_2").val();
      observaciones = $("#observaciones2").val();

      con_certificado = $("#con_certificado2:checked").val();
      con_formulario = $("#con_formulario2:checked").val();
     
        if (($("#select_articulo_horas_h2").val() != "") && $("#select_articulo_horas_h2").val() != undefined)
         {
          articulo = $("#select_articulo_horas_h2").val();
         }
          if(($("#select_articulo_cargos_no_docente_h2").val() != "") && $("#select_articulo_cargos_no_docente_h2").val() != undefined)
         {        
          articulo = $("#select_articulo_cargos_no_docente_h2").val();
         }
         if(($("#select_articulo_horas_esc_1").val() != "") && $("#select_articulo_horas_esc_1").val() != undefined)
         {
          articulo = $("#select_articulo_horas_esc_1").val();
 
          }
        

      if (fecha_inicio == ""){
        alert("Debe seleccionar una fecha de inicio");
        return; 
      }  
      if (articulo == ""){
        alert("Debe seleccionar un Artículo");
        return; 
      }   
        
      $.ajax({
          url: '/soft/snpe/licencia/guardar_licencia_horas2/?id_horas='+id_horas+'&fecha_inicio='+fecha_inicio+'&fecha_fin='+fecha_fin+'&articulo='+articulo+"&con_certificado="+con_certificado+"&con_formulario="+con_formulario+'&fecha_anio_lic='+fecha_anio_lic+'&prestador_2='+prestador_2+'&observaciones='+observaciones,
          type: 'POST',
        })
      .done(function(data) {
        tabla_horas_licencia.api().ajax.url('/soft/snpe/licencia/altas_bajas_horas_licencia_permitida/'+window.dni); 
        tabla_horas_licencia.api().ajax.reload();
        tabla_licencia.api().ajax.url('/soft/snpe/licencia/licencia_dadas/'+window.dni); 
        tabla_licencia.api().ajax.reload();
        $("#select_articulo_horas6" ).val("");
        $("#input_anio_lic_6" ).val("");
        $("#art_doc_2" ).val("");
        $("#prestador").val("");
        $("#observaciones2").val("");
        if (data != "") {
          alert(data); 
        };
      })
    });



  $("#art_doc_2" ).change(function() {
    art_doc_2 = $("#art_doc_2").val();
      if (art_doc_2 == "Docente"){
         $("#obv2").show();
         $("#select_articulo_horas6").show();
         $("#select_articulo_horas_h2").show();
         $("#select_articulo_horas_esc_1").hide();
         $("#select_articulo_horas_esc_1").val("");
         $("#s2id_select_articulo_cargos_no_docente").hide();
          $("#select_articulo_cargos_no_docente_h2").hide(); 
         $("#select_articulo_cargos_no_docente_h2").val("");
         $("#s2id_select_articulo_cargos_no_docente").val(""); 
         $("#anio_lic_6").hide();
         $("#observaciones2").val(""); 
         }
        if (art_doc_2 == "Auxiliar"){
         $("#obv2").show();
         $("#select_articulo_horas_esc_1").hide();
         $("#select_articulo_horas_esc_1").val("");
         $("#s2id_select_articulo_cargos_no_docente").show();
         $("#select_articulo_cargos_no_docente_h2").show(); 
         $("#select_articulo_cargos_no_docente_h2").val("");
         $("#select_articulo_horas6").hide();
         $("#select_articulo_horas6").val("");
         $("#select_articulo_horas_h2").hide();
         $("#select_articulo_horas_h2").val("");
         $("#input_anio_lic_6" ).val("");
         $("#anio_lic_6").hide();
         $("#observaciones2").val(""); 
          }
         if (art_doc_2 == ""){
         $("#obv2").show();
         $("#select_articulo_horas_esc_1").hide();
         $("#select_articulo_horas_esc_1").val("");
         $("#select_articulo_horas_h2").hide();
         $("#select_articulo_horas6").hide();
         $("#s2id_select_articulo_cargos_no_docente").hide();
         $("#select_articulo_cargos_no_docente_h2").hide();
         $("#select_articulo_cargos_no_docente_h2").val("");
         $("#s2id_select_articulo_cargos_no_docente").val("");
         $("#select_articulo_horas6").val("");
         $("#input_anio_lic_6" ).val("");
         $("#anio_lic_6").hide();
         $("#observaciones2").val(""); 
          }        
  });



  $("#select_articulo_horas_h2" ).change(function() {

    var id_articulo = parseInt($("#select_articulo_horas_h2 option:selected").val(),10);
    $.ajax({
      url: '/soft/snpe/licencia/buscar_articulo_dias_hora/'+id_articulo+'/'+id_horas,
      type: 'GET',
      })
        .done(function(data) {
        $("#alerta-dias-1").html("Cantidad máxima de días en este artículo: "+data);
        $("#alerta-dias-1").show();

        var myarray = [394,395,352,353, 354, 355, 356, 357, 358, 359, 360, 378];
        var vacaciones = [241,289,365,366]
        var art_medicos = [242,243,244,245,263,264,265,266,291,292,293,294,321,322,323,324,325]

        if(jQuery.inArray(id_articulo, art_medicos) !== -1){
          $('input:checkbox').removeAttr('checked');
          $('#con_certificado2').show();
        }else{

          $('input:checkbox').removeAttr('checked');
          $('#con_certificado2').hide();
        }

        if(jQuery.inArray(id_articulo, vacaciones) !== -1){
          $("#anio_lic_6").show();
          $("#input_anio_lic_6" ).val(""); 
        }
        else{
          $("#anio_lic_6").hide();
          }
          if(jQuery.inArray(id_articulo, myarray) !== -1){
            $("#select_destino_horas_ag").show();
          }
          else{
              $("#select_destino_horas_ag").hide();
            }
            if (id_articulo != null ){
              $("#obv1").show();
            }
            else{
              $("#obv1").hide();
            } 
        }) 

  });



   $("#select_articulo_cargos_no_docente_h2" ).change(function() {

    var id_articulo = parseInt($("#select_articulo_cargos_no_docente_h2 option:selected").val(),10);
    $.ajax({
      url: '/soft/snpe/licencia/buscar_articulo_dias_hora/'+id_articulo+'/'+id_horas,
      type: 'GET',
      })
        .done(function(data) {
        $("#alerta-dias-1").html("Cantidad máxima de días en este artículo: "+data);
        $("#alerta-dias-1").show();
        var myarray = [394,395,352,353, 354, 355, 356, 357, 358, 359, 360, 378];
        var vacaciones = [241,289,365,366]
        var art_medicos = [242,243,244,245,263,264,265,266,291,292,293,294,321,322,323,324,325]

        if(jQuery.inArray(id_articulo, art_medicos) !== -1){
          $('input:checkbox').removeAttr('checked');
          $('#con_certificado2').show();
        }else{

          $('input:checkbox').removeAttr('checked');
          $('#con_certificado2').hide();
        }

        if(jQuery.inArray(id_articulo, vacaciones) !== -1){
          $("#anio_lic_6").show();
          $("#input_anio_lic_6" ).val(""); 
        }
        else{
          $("#anio_lic_6").hide();
          }
          if(jQuery.inArray(id_articulo, myarray) !== -1){
            $("#select_destino_horas").show();
          }
          else{
              $("#select_destino_horas").hide();
            }
            if (id_articulo != null ){
              $("#obv1").show();
            }
            else{
              $("#obv1").hide();
            } 
        }) 
  });

  $("#select_articulo_horas_esc_1" ).change(function() {

    var id_articulo = parseInt($("#select_articulo_horas_esc_1 option:selected").val(),10);
    $.ajax({
      url: '/soft/snpe/licencia/buscar_articulo_dias_hora/'+id_articulo+'/'+id_horas,
      type: 'GET',
      })
        .done(function(data) {
          console.log("RESPONSEDE");
        $("#alerta-dias-1").html("Cantidad máxima de días en este artículo: "+data);
        $("#alerta-dias-1").show();
        var myarray = [394, 395, 352, 353, 354, 355, 356, 357, 358, 359, 360, 378];
        var vacaciones = [241, 289, 365, 366]


        if(jQuery.inArray(id_articulo, vacaciones) !== -1){
          $("#anio_lic_6").show();
          $("#input_anio_lic_6" ).val(""); 
        }
        else{
          $("#anio_lic_6").hide();
          }
          if(jQuery.inArray(id_articulo, myarray) !== -1){
            $("#select_destino_horas_ag").show();
          }
          else{
              $("#select_destino_horas_ag").hide();
            }
            if (id_articulo != null ){
              $("#obv1").show();
            }
            else{
              $("#obv1").hide();
            } 
        }) 
  });
//-------------------------------------------Modal Horas 2  FIN--------------------------------------------------------------------
//---------------------------Cargos-------------------------------------
  
  $('#modal_licencia_cargos').on('shown.bs.modal', function (event) {      
      id_cargos = $(event.relatedTarget).attr('id_cargos');
      $("#con_certificado6").hide();
      $("textarea#disposicion3").val("");
      $("#disposicion3").hide();
      $("#con_formulario6").show();
      $('input:checkbox').removeAttr('checked');
    });

  $('#modal_licencia_cargos').on('hidden.bs.modal', function (e) {
    $("#alerta-dias-cargo").hide();
    $("#anio_lic_1").hide();
    $("#select_articulo_cargos").val("");
    $("#obv3" ).hide();
    $("#observaciones3").val("");
    $("#con_certificado6").hide();
    $("#con_formulario6").hide();
    $('input:checkbox').removeAttr('checked');

  });


  $('#btn_licencia_cargos').on('click', function () {
      fecha_inicio = $("#input_fecha_inicio2").val();
      fecha_fin = $("#input_fecha_fin2").val();
      articulo = $("#select_articulo_cargos").val();
      fecha_anio_lic_1 = $("#input_anio_lic_1").val();
      destino = $("#select_destino_cargos").val();
      observaciones = $("#observaciones3").val();
      con_certificado = $("#con_certificado6:checked").val();
      con_formulario = $("#con_formulario6:checked").val();
      disposicion = $("textarea#disposicion3").val();

      if (fecha_inicio == ""){
        alert("Debe seleccionar una fecha de inicio");
        return; 
      }  
      if (articulo == ""){
        alert("Debe seleccionar un Artículo");
        return; 
      }

      if((jQuery.inArray(parseInt(articulo), traslado_definitivos) !== -1) && disposicion ===""){
          alert("Campo disposicion no puede estar vacio.");
          return;
      }
        
      $.ajax({
          url: '/soft/snpe/licencia/guardar_licencia_cargos/?id_cargos='+id_cargos+'&fecha_inicio='+fecha_inicio+'&fecha_fin='+fecha_fin+'&articulo='+articulo+'&fecha_anio_lic_1='+fecha_anio_lic_1+'&destino='+destino+'&observaciones='+observaciones+"&con_certificado="+con_certificado+"&con_formulario="+con_formulario+"&disposicion="+disposicion,
          
          type: 'POST',
        })
      .done(function(data) {
       tabla_cargos_licencia.api().ajax.url('/soft/snpe/licencia/cargos_licencia_permitida/'+window.dni); 
        tabla_cargos_licencia.api().ajax.reload();
        tabla_licencia.api().ajax.url('/soft/snpe/licencia/licencia_dadas/'+window.dni); 
        tabla_licencia.api().ajax.reload();
        $("#select_articulo_cargos" ).val("");
        $("#input_anio_lic_1" ).val("");
        $("#observaciones3").val("");   
        $("textarea#disposicion3").val("");

        if (data != "") {
          alert(data); 
        };       
      })
  });


  $("#select_articulo_cargos" ).change(function() {
    var id_articulo = parseInt($("#select_articulo_cargos option:selected").val(),10);
      $.ajax({
        url: '/soft/snpe/licencia/buscar_articulo_dias_cargo/'+id_articulo+'/'+id_cargos,
        type: 'GET',
      })
        .done(function(data) {

          $("#alerta-dias-cargo").html("Cantidad máxima de días en este artículo: "+data);
          $("#alerta-dias-cargo").show();

          var myarray = [394,395,352,353, 354, 355, 356, 357, 358, 359, 360, 378];
          var vacaciones = [241,289,365,366]
          var art_medicos = [242,243,244,245,263,264,265,266,291,292,293,294,321,322,323,324,325]
            
          $('#disposicion3').hide();          
          if(jQuery.inArray(id_articulo, traslado_definitivos) !== -1){
            $('#disposicion3').show();
          }
          if(jQuery.inArray(id_articulo, art_medicos) !== -1){
            $('input:checkbox').removeAttr('checked');
            $('#con_certificado6').show();
          }else{

            $('input:checkbox').removeAttr('checked');
            $('#con_certificado6').hide();
          }

          if(jQuery.inArray(id_articulo, vacaciones) !== -1){
            $("#anio_lic_1").show();
            $("#input_anio_lic_1" ).val(""); 
          }
          else{
            $("#anio_lic_1").hide();
            }
            if(jQuery.inArray(id_articulo, myarray) !== -1){
              $("#select_destino_cargos").show();
            }
            else{
                $("#select_destino_cargos").hide();
              }
            if (id_articulo == null){
            $("#obv3").hide();
            }
            else{
              $("#obv3").show();
            } 
          }) 
  });


//------------------------------------------------------------------------Cargos 2 -----------------------------------------------------
  $('#modal_licencia_cargos2').on('shown.bs.modal', function (event) {      
      id_cargos = $(event.relatedTarget).attr('id_cargos');
      $('input:checkbox').removeAttr('checked');
    });

  $('#modal_licencia_cargos2').on('hidden.bs.modal', function (e) {
    $("#alerta-dias-cargo-1").hide();
    $("#anio_lic_7").hide();
    $("#select_articulo_cargos7").val("");
    $("#prestador_3").val("");
    $("#obv4" ).hide();
    $("#observaciones4").val("");
    $('input:checkbox').removeAttr('checked');
  });

  $('#modal_licencia_cargos2_obs').on('shown.bs.modal', function (event) {      
      id_lic = $(event.relatedTarget).attr('id_lic');
      $("#observaciones11").val($(event.relatedTarget).attr('observaciones'));
    });


  $('#btn_licencia_cargos2').on('click', function () {
      fecha_inicio = $("#input_fecha_inicio7").val();
      fecha_fin = $("#input_fecha_fin7").val();
      articulo = $("#select_articulo_cargos7").val();
      fecha_anio_lic_7 = $("#input_anio_lic_7").val();
      prestador_3 = $("#prestador_3").val();
      destino = $("#select_destino_cargos2").val();
      observaciones = $("#observaciones4").val();
      con_certificado = $("#con_certificado7:checked").val();
      con_formulario = $("#con_formulario7:checked").val();


      if (fecha_inicio == ""){
        alert("Debe seleccionar una fecha de inicio");
        return; 
      }  
      if (articulo == ""){
        alert("Debe seleccionar un Artículo");
        return; 
      }   
        
      $.ajax({
          url: '/soft/snpe/licencia/guardar_licencia_cargos2/?id_cargos='+id_cargos+'&fecha_inicio='+fecha_inicio+'&fecha_fin='+fecha_fin+'&articulo='+articulo+'&fecha_anio_lic_7='+fecha_anio_lic_7+'&prestador_3='+prestador_3+'&observaciones='+observaciones+"&con_certificado="+con_certificado+"&con_formulario="+con_formulario,
          type: 'POST',
        })
      .done(function(data) {
      tabla_cargos_licencia.api().ajax.url('/soft/snpe/licencia/cargos_licencia_permitida/'+window.dni); 
        tabla_cargos_licencia.api().ajax.reload();
        tabla_licencia.api().ajax.url('/soft/snpe/licencia/licencia_dadas/'+window.dni); 
        tabla_licencia.api().ajax.reload();
        $("#select_articulo_cargos7" ).val("");
        $("#input_anio_lic_7" ).val("");
        $("#observaciones4").val("");
        if (data != "") {
          alert(data); 
        };          
      })
  });




  $("#select_articulo_cargos7" ).change(function() {
    var id_articulo = parseInt($("#select_articulo_cargos7 option:selected").val(),10);
      $.ajax({
        url: '/soft/snpe/licencia/buscar_articulo_dias_cargo/'+id_articulo+'/'+id_cargos,
        type: 'GET',
      })
        .done(function(data) {
          $("#alerta-dias-cargo-1").html("Cantidad máxima de días en este artículo: "+data);
          $("#alerta-dias-cargo-1").show();
          var myarray = [394,395,352,353, 354, 355, 356, 357, 358, 359, 360, 378];
          var vacaciones = [241,289,365,366]
          var art_medicos = [242,243,244,245,263,264,265,266,291,292,293,294,321,322,323,324,325]

          if(jQuery.inArray(id_articulo, art_medicos) !== -1){
            $('input:checkbox').removeAttr('checked');
            $('#con_certificado7').show();
          }else{

            $('input:checkbox').removeAttr('checked');
            $('#con_certificado7').hide();
          }

          if(jQuery.inArray(id_articulo, vacaciones) !== -1){
            $("#anio_lic_7").show();
            $("#input_anio_lic_7" ).val(""); 
          }
          else{
            $("#anio_lic_7").hide();
            }
            if(jQuery.inArray(id_articulo, myarray) !== -1){
              $("#select_destino_cargos2").show();
            }
            else{
                $("#select_destino_cargos2").hide();
              }
            if (id_articulo == null){
              $("#obv4").hide();
              }
              else
              {
              $("#obv4").show();
              }  
            }) 
    });

  //---------------------------Cargos no docentes-------------------------------------
  
  $('#modal_licencia_cargos_no_docentes').on('shown.bs.modal', function (event) {      
      id_cargos_no_docentes = $(event.relatedTarget).attr('id_cargo_no_docentes');
      $('input:checkbox').removeAttr('checked');
    });

  $('#modal_licencia_cargos_no_docentes').on('hidden.bs.modal', function (e) {
    $("#alerta-dias-cargo-no-docentes").hide();
    $("#anio_lic_2").hide();
    $("#select_articulo_cargos_no_docente").val("");
    $("#select_destino_car_aux").val("");
    $("#obv5" ).hide();
    $("#observaciones5").val("");
    $('input:checkbox').removeAttr('checked');
  });


  $('#btn_licencia_cargos_no_docentes').on('click', function () {
      fecha_inicio = $("#input_fecha_inicio4").val();
      fecha_fin = $("#input_fecha_fin4").val();
      articulo = $("#select_articulo_cargos_no_docente").val();
      fecha_anio_lic_2 = $("#input_anio_lic_2").val();
      observaciones = $("#observaciones5").val();
      destino = $("#select_destino_car_aux").val();
      con_certificado = $("#con_certificado8:checked").val();
      con_formulario = $("#con_formulario8:checked").val();

      if (fecha_inicio == ""){
        alert("Debe seleccionar una fecha de inicio");
        return; 
      } 
      if (articulo == ""){
        alert("Debe seleccionar un Artículo");
        return; 
      }   
        
      $.ajax({
          url: '/soft/snpe/licencia/guardar_licencia_cargos_no_docentes/?id_cargos_no_docentes='+id_cargos_no_docentes+'&fecha_inicio='+fecha_inicio+'&fecha_fin='+fecha_fin+'&articulo='+articulo+'&fecha_anio_lic_2='+fecha_anio_lic_2+'&observaciones='+observaciones+'&destino='+destino+"&con_certificado="+con_certificado+"&con_formulario="+con_formulario,
          type: 'POST',
        })
      .done(function(data) {
        tabla_cargos_no_docentes_licencia.api().ajax.url('<%= cargos_no_docentes_licencia_permitida_path %>?dni='+window.dni); 
        tabla_cargos_no_docentes_licencia.api().ajax.reload();
        tabla_licencia.api().ajax.url('/soft/snpe/licencia/licencia_dadas/'+window.dni); 
        tabla_licencia.api().ajax.reload();
        $("#select_articulo_cargos_no_docente" ).val("");
        $("#input_anio_lic_2" ).val("");
        $("#observaciones5").val("");
        $("#select_destino_car_aux").val("");
        if (data != "" && data != null) {
        alert(data) ; 
        };

      })
  });


  $("#select_articulo_cargos_no_docente" ).change(function() {
    var id_articulo = parseInt($("#select_articulo_cargos_no_docente option:selected").val(),10);
      $.ajax({
        url: '/soft/snpe/licencia/buscar_articulo_dias_cargo_no_docente/'+id_articulo+'/'+id_cargos_no_docentes,
        type: 'GET',
      })
        .done(function(data) {
          $("#alerta-dias-cargo-no-docentes").html("Cantidad máxima de días en este artículo: "+data);
          $("#alerta-dias-cargo-no-docentes").show();
          $("#select_destino_car_aux").show();
          $("#select_destino_car_aux").val("");
          var myarray = [394,395,352,353, 354, 355, 356, 357, 358, 359, 360, 378];
          var vacaciones = [241,289,365,366]
          var art_medicos = [242,243,244,245,263,264,265,266,291,292,293,294,321,322,323,324,325]

          if(jQuery.inArray(id_articulo, art_medicos) !== -1){
            $('input:checkbox').removeAttr('checked');
            $('#con_certificado8').show();
          }else{

            $('input:checkbox').removeAttr('checked');
            $('#con_certificado8').hide();
          }

          if(jQuery.inArray(id_articulo, vacaciones) !== -1){
            $("#anio_lic_2").show();
            $("#input_anio_lic_2" ).val(""); 
          }
          else{
            $("#anio_lic_2").hide();
            }
            if(jQuery.inArray(id_articulo, myarray) !== -1){
              $("#select_destino_car_aux").show();
            }
            else{
                $("#select_destino_car_aux").hide();
              }
              if (id_articulo != null ){
                $("#obv5").show();
              }
              else{
                $("#obv5").hide();
              } 
          }) 

  });

//----------------------------------------------- modal nueva licencia cargos nds --------------------------------

$('#modal_licencia_cargos_no_docentes2_obs').on('shown.bs.modal', function (event) {      
      id_lic = $(event.relatedTarget).attr('id_lic');
      $("#observaciones10").val($(event.relatedTarget).attr('observaciones'));
    });

$('#modal_licencia_cargos_no_docentes2').on('shown.bs.modal', function (event) {      
      id_cargos_no_docentes = $(event.relatedTarget).attr('id_cargo_no_docentes');
      $('input:checkbox').removeAttr('checked');
    });

$('#modal_licencia_cargos_no_docentes2').on('hidden.bs.modal', function (e) {
    $("#alerta-dias-cargo-no-docentes-1").hide();
    $("#anio_lic_8").hide();
    $("#select_articulo_cargos_no_docente8").val("");
    $("#select_destino_car_aux_2").val("");
    $("#prestador_4").val("");
    $("#obv6").hide();
    $("#observaciones6").val("");
    $('input:checkbox').removeAttr('checked');
  });

 $('#btn_licencia_cargos_no_docentes2').on('click', function () {
      fecha_inicio = $("#input_fecha_inicio8").val();
      fecha_fin = $("#input_fecha_fin8").val();
      articulo = $("#select_articulo_cargos_no_docente8").val();
      fecha_anio_lic_2 = $("#input_anio_lic_8").val();
      prestador_4 = $("#prestador_4").val();
      observaciones = $("#observaciones6").val();
      destino = $("#select_destino_car_aux_2").val();
      con_certificado = $("#con_certificado9:checked").val();
      con_formulario = $("#con_formulario9:checked").val();

      if (fecha_inicio == ""){
        alert("Debe seleccionar una fecha de inicio");
        return; 
      } 
      if (articulo == ""){
        alert("Debe seleccionar un Artículo");
        return; 
      }   
        
      $.ajax({
          url: '/soft/snpe/licencia/guardar_licencia_cargos_no_docentes2/?id_cargos_no_docentes='+id_cargos_no_docentes+'&fecha_inicio='+fecha_inicio+'&fecha_fin='+fecha_fin+'&articulo='+articulo+'&fecha_anio_lic_7='+fecha_anio_lic_2+'&prestador_4='+prestador_4+'&observaciones='+observaciones+"&con_certificado="+con_certificado+"&con_formulario="+con_formulario,
          type: 'POST',
        })
      .done(function(data) {
        tabla_cargos_no_docentes_licencia.api().ajax.url('<%= cargos_no_docentes_licencia_permitida_path %>?dni='+window.dni); 
        tabla_cargos_no_docentes_licencia.api().ajax.reload();
        tabla_licencia.api().ajax.url('/soft/snpe/licencia/licencia_dadas/'+window.dni); 
        tabla_licencia.api().ajax.reload();
        $("#select_articulo_cargos_no_docente8" ).val("");
        $("#input_anio_lic_8" ).val("");
        $("#observaciones6").val("");
        $("#select_destino_car_aux_2").val("");   
        if (data != "") {
          alert(data); 
        };        
      })
  });




  $("#select_articulo_cargos_no_docente8" ).change(function() {
    var id_articulo = parseInt($("#select_articulo_cargos_no_docente8 option:selected").val(),10);
      $.ajax({
        url: '/soft/snpe/licencia/buscar_articulo_dias_cargo_no_docente/'+id_articulo+'/'+id_cargos_no_docentes,
        type: 'GET',
      })
        .done(function(data) {
          $("#alerta-dias-cargo-no-docentes-1").html("Cantidad máxima de días en este artículo: "+data);
          $("#alerta-dias-cargo-no-docentes-1").show();

          var myarray = [394,395,352,353, 354, 355, 356, 357, 358, 359, 360, 378];
          var vacaciones = [241,289,365,366]
          var art_medicos = [242,243,244,245,263,264,265,266,291,292,293,294,321,322,323,324,325]

          if(jQuery.inArray(id_articulo, art_medicos) !== -1){
            $('input:checkbox').removeAttr('checked');
            $('#con_certificado9').show();

          }else{

            $('input:checkbox').removeAttr('checked');
            $('#con_certificado9').hide();
          }


          if(jQuery.inArray(id_articulo, vacaciones) !== -1){
            $("#anio_lic_8").show();
            $("#input_anio_lic_8" ).val(""); 
          }
          else{
            $("#anio_lic_8").hide();
            }
            if(jQuery.inArray(id_articulo, myarray) !== -1){
              $("#select_destino_car_aux_2").show();
              $("#select_destino_car_aux_2").val("");
            }
            else{
                $("#select_destino_car_aux_2").hide();
              }
              if (id_articulo != null ){
                $("#obv6").show();
              }
              else{
                $("#obv6").hide();
              } 
          }) 

  });

//----------------------------Confirmacion de licencia-----------------------

  $('#modal_licencia_final').on('shown.bs.modal', function (event) {    
      id_lic = $(event.relatedTarget).attr('id_lic');
      $('#input_fecha_inicio3').val($(event.relatedTarget).attr('fecha_desde'));
      $("#input_fecha_fin3").val($(event.relatedTarget).attr('fecha_hasta'));
      $("#observaciones_final").val($(event.relatedTarget).attr('observaciones'));
      $("#prestador").val($(event.relatedTarget).attr('prestador'));
      if ($(event.relatedTarget).attr('con_certificado') == "true"){
        $("input[name='con_certificado5']").prop('checked', true).change();
      }
      if ($(event.relatedTarget).attr('con_formulario') == "true"){
        $("input[name='con_formulario5']").prop('checked', true).change();
      }
      
  });



  $('#modal_licencia_cargos').on('hidden.bs.modal', function (e) {
    
  });

  $('#btn_licencia_final').on('click', function () {
    if ($("#input_fecha_fin3").val() == ""){
      alert("Para finalizar la licencia la fecha de FIN no puede estar vacia ");
      return;
    }
    fecha_inicio = $("#input_fecha_inicio3").val();
    fecha_fin = $("#input_fecha_fin3").val();
    observaciones = $("#observaciones_final").val();
    por_baja = $("#por_baja:checked").val();
    prestador = $("#prestador").val();

    con_certificado = $("#con_certificado5:checked").val();
    con_formulario = $("#con_formulario5:checked").val();
   
   
    $.ajax({
      url: '/soft/snpe/licencia/guardar_licencia_final/'+id_lic+'/'+fecha_inicio+'/'+fecha_fin+'/'+por_baja+'/?observaciones='+observaciones+'&prestador='+prestador+"&con_certificado="+con_certificado+"&con_formulario="+con_formulario,
      type: 'POST',
      })
    .done(function(data) {
      tabla_horas_licencia.api().ajax.url('/soft/snpe/licencia/altas_bajas_horas_licencia_permitida/'+window.dni);
      tabla_cargos_licencia.api().ajax.url('/soft/snpe/licencia/cargos_licencia_permitida/'+window.dni);
      tabla_cargos_no_docentes_licencia.api().ajax.url('<%= cargos_no_docentes_licencia_permitida_path %>?dni='+window.dni);
      tabla_licencia.api().ajax.url('/soft/snpe/licencia/licencia_dadas/'+window.dni);
      tabla_horas_licencia.api().ajax.reload();
      tabla_cargos_licencia.api().ajax.reload();
      tabla_cargos_no_docentes_licencia.api().ajax.reload();
      tabla_licencia.api().ajax.reload();
      if (data != "" && data != null) {
        alert(data) ; 
      };
    })
  });
   $('#tabla-persona').dataTable({
        language : {"sUrl": "<%= asset_path('language.es.json') %>",},
        processing : true,
        serverSide : true,
        ajax : $('#tabla-persona').data('source'),
        pagingType: "simple",
      });

  $('#btn_cancelar').on('click', function () {
    $.ajax({
      url: '/soft/snpe/licencia/cancelar_licencia/'+id_lic,
      type: 'POST',
      })
    .done(function(data) {
      tabla_horas_licencia.api().ajax.url('/soft/snpe/licencia/altas_bajas_horas_licencia_permitida/'+window.dni);
      tabla_cargos_licencia.api().ajax.url('/soft/snpe/licencia/cargos_licencia_permitida/'+window.dni);
      tabla_cargos_no_docentes_licencia.api().ajax.url('<%= cargos_no_docentes_licencia_permitida_path %>?dni='+window.dni);
      tabla_licencia.api().ajax.url('/soft/snpe/licencia/licencia_dadas/'+window.dni);
      tabla_horas_licencia.api().ajax.reload();
      tabla_cargos_licencia.api().ajax.reload();
      tabla_cargos_no_docentes_licencia.api().ajax.reload();
      tabla_licencia.api().ajax.reload();
      if (data != "") {
        alert(data) ; 
      };
      
    })
  });


  $('#btn_editar_com').on('click', function () {
    observaciones = $("#observaciones_final").val();
    $.ajax({
      url: '/soft/snpe/licencia/editar_comentario_licencia_final/?id_lic='+id_lic+'&observaciones='+observaciones,
      type: 'POST',
      })
    .done(function(data) {
      tabla_horas_licencia.api().ajax.url('/soft/snpe/licencia/altas_bajas_horas_licencia_permitida/'+window.dni);
      tabla_cargos_licencia.api().ajax.url('/soft/snpe/licencia/cargos_licencia_permitida/'+window.dni);
      tabla_cargos_no_docentes_licencia.api().ajax.url('<%= cargos_no_docentes_licencia_permitida_path %>?dni='+window.dni);
      tabla_licencia.api().ajax.url('/soft/snpe/licencia/licencia_dadas/'+window.dni);
      tabla_horas_licencia.api().ajax.reload();
      tabla_cargos_licencia.api().ajax.reload();
      tabla_cargos_no_docentes_licencia.api().ajax.reload();
      tabla_licencia.api().ajax.reload();
    })
  });

  $('#btn_editar_obs').on('click', function () {
    observaciones = $("#observaciones12").val();
    $.ajax({
      url: '/soft/snpe/licencia/guardar_licencia_obs/?id_lic='+id_lic+'&observaciones='+observaciones,
      type: 'POST',
      })
    .done(function(data) {
      tabla_horas_licencia.api().ajax.url('/soft/snpe/licencia/altas_bajas_horas_licencia_permitida/'+window.dni);
      tabla_cargos_licencia.api().ajax.url('/soft/snpe/licencia/cargos_licencia_permitida/'+window.dni);
      tabla_cargos_no_docentes_licencia.api().ajax.url('<%= cargos_no_docentes_licencia_permitida_path %>?dni='+window.dni);
      tabla_licencia.api().ajax.url('/soft/snpe/licencia/licencia_dadas/'+window.dni);
      tabla_horas_licencia.api().ajax.reload();
      tabla_cargos_licencia.api().ajax.reload();
      tabla_cargos_no_docentes_licencia.api().ajax.reload();
      tabla_licencia.api().ajax.reload();
    })
  });


  $('#btn_editar_obs2').on('click', function () {
    observaciones = $("#observaciones11").val();
    $.ajax({
      url: '/soft/snpe/licencia/guardar_licencia_obs/?id_lic='+id_lic+'&observaciones='+observaciones,
      type: 'POST',
      })
    .done(function(data) {
      tabla_horas_licencia.api().ajax.url('/soft/snpe/licencia/altas_bajas_horas_licencia_permitida/'+window.dni);
      tabla_cargos_licencia.api().ajax.url('/soft/snpe/licencia/cargos_licencia_permitida/'+window.dni);
      tabla_cargos_no_docentes_licencia.api().ajax.url('<%= cargos_no_docentes_licencia_permitida_path %>?dni='+window.dni);
      tabla_licencia.api().ajax.url('/soft/snpe/licencia/licencia_dadas/'+window.dni);
      tabla_horas_licencia.api().ajax.reload();
      tabla_cargos_licencia.api().ajax.reload();
      tabla_cargos_no_docentes_licencia.api().ajax.reload();
      tabla_licencia.api().ajax.reload();

    })
  });


  $('#btn_editar_obs3').on('click', function () {
    observaciones = $("#observaciones10").val();
    $.ajax({
      url: '/soft/snpe/licencia/guardar_licencia_obs/?id_lic='+id_lic+'&observaciones='+observaciones,
      type: 'POST',
      })
    .done(function(data) {
      tabla_horas_licencia.api().ajax.url('/soft/snpe/licencia/altas_bajas_horas_licencia_permitida/'+window.dni);
      tabla_cargos_licencia.api().ajax.url('/soft/snpe/licencia/cargos_licencia_permitida/'+window.dni);
      tabla_cargos_no_docentes_licencia.api().ajax.url('<%= cargos_no_docentes_licencia_permitida_path %>?dni='+window.dni);
      tabla_licencia.api().ajax.url('/soft/snpe/licencia/licencia_dadas/'+window.dni);
      tabla_horas_licencia.api().ajax.reload();
      tabla_cargos_licencia.api().ajax.reload();
      tabla_cargos_no_docentes_licencia.api().ajax.reload();
      tabla_licencia.api().ajax.reload();

    })
  });

</script>