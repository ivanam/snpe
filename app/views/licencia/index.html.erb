<% if (current_user.role? :escuela ) %>
  <div class="panel panel-info">
    <div class="panel-heading">
      <h3 class="panel-title">
        Personal Activo
      </h3>
    </div>
    <div class="panel-body">
    <div class="table-responsive">
      <table id="tabla-personal-activo" class="table table-striped table-bordered table-hover" data-source = "<%= altas_bajas_horas_index_bajas_path(format: :json) %>" >
        <thead>
          <tr>
            <th>DNI</th>
            <th>CUIL</th>
            <th>Apellido</th>
            <th>Nombre</th>
            <th>Secuencia</th>
            <th>CJ</th>
            <th>Cue</th>
            <th>Establecimiento</th>
            <th>Curso</th>
            <th>Div</th>
            <th>Fecha Alta</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
    </div>
  </div>
  <hr/>
<% end %>

<% @licencia = Licencium.new %>
<%= render 'form_licencia', licencia: @licencia %>


<div class="panel panel-info">
    <div class="panel-heading">
      <h3 class="panel-title">
        Horas
      </h3>
    </div>
    <div class="panel-body">
    <div class="table-responsive">
      <table id="tabla-horas-licencia" class="table table-striped table-bordered table-hover" data-source = "<%= altas_bajas_horas_licencia_permitida_path(format: :json) %>" >
        <thead>
          <tr>
            <th>Secuencia</th>
            <th>CJ</th>
            <th>Cue</th>
            <th>Establecimiento</th>
            <th>Curso</th>
            <th>Div</th>
            <th>Observaciones</th>
            <th>Fecha Alta</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
  </div>
  </div>
  <hr/>

  <div class="panel panel-info">
    <div class="panel-heading">
      <h3 class="panel-title">
        Cargos
      </h3>
    </div>
    <div class="panel-body">
    <div class="table-responsive">
      <table id="tabla-cargos-licencia" class="table table-striped table-bordered table-hover" data-source = "<%= cargos_licencia_permitida_path(format: :json) %>" >
        <thead>
          <tr>
            <th>Secuencia</th>
            <th>CJ</th>
            <th>Cue</th>
            <th>Establecimiento</th>
            <th>Curso</th>
            <th>Div</th>
            <th>Observaciones</th>
            <th>Fecha Alta</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
  </div>
  </div>
  <hr/>


<div class="table-responsive">
  <table id="tabla-licencium" class="table table-striped table-bordered table-hover" data-source = "<%= licencia_path(format: :json) %>" >
    <thead>
      <tr>
        <th>id</th>
        <th>tipo</th>
        <th>Fecha Desde</th>
        <th>Fecha Alta</th>
        <th>Articulo</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
</div>


<script type="text/javascript">
  $(document).ready(function($) {
    $('#tabla-licencium').dataTable({
      language : {"sUrl": "<%= asset_path('language.es.json') %>",},
      processing : true,
      serverSide : true,
      ajax : $('#tabla-licencium').data('source'),
      pagingType: "simple",
    });

    $('#tabla-horas-licencia').dataTable({
      language : {"sUrl": "<%= asset_path('language.es.json') %>",},
      processing : true,
      serverSide : true,
      ajax : $('#tabla-horas-licencia').data('source'),
      pagingType: "simple",
      paginate: false,
      filter: false,
     
    });

    $('#tabla-cargos-licencia').dataTable({
      language : {"sUrl": "<%= asset_path('language.es.json') %>",},
      processing : true,
      serverSide : true,
      ajax : $('#tabla-cargos-licencia').data('source'),
      pagingType: "simple",
      paginate: false,
      filter: false,
     
    });
  });

  var tabla_personal_activo = $('#tabla-personal-activo')
    .on('draw.dt', function () {
      $('.popup-fecha')
        .on('save', function(e, params) {
          tabla_personal_activo.api().ajax.reload();
          //tabla_bajas_efectivas.api().ajax.reload();
        })
        .editable({
          savenochange: true,
          success: function(response, newValue) {
            if(response.status == 'error') return response.msg; //msg will be shown in editable form
          }
        });
    })
    .dataTable({
      language : {"sUrl": "<%= asset_path('language.es.json') %>",},
      processing: true,
      serverSide: true,
      ajax : $('#tabla-personal-activo').data('source'),
      pagingType: "simple",
      "pageLength": 5,
    });
</script>