
<%= javascript_include_tag "util.js" %>
<%= javascript_include_tag "daterangepicker"%>
<%= stylesheet_link_tag "daterangepicker-bs3" %>

<br/>
<hr style="height:2px;border-width:0;color:red;background-color:#7b9eb2" />


<center>
   <button type="button" id="hs" class="btn" data-dismiss="modal"> HORAS </button>
   <button type="button" id="doc" class="btn" data-dismiss="modal"> CARGOS </button>
   <button type="button" id="aux" class="btn" data-dismiss="modal"> AUXILIARES </button>
</center>

<hr style="height:2px;border-width:0;color:red;background-color:#7b9eb2" />

<div class="">
    <b>Seleccione un periodo de fechas: </b> <input type="text" id="daterange" /> </br></br>
</div>

<div id="hhs">

<h2>Horas Cátedra</h2>
  <div align="right">
   <button id="btn-filtrar1" class="btn btn-success">
   <span class="glyphicon glyphicon-download-alt"></span>
       Descargar Licencias de Horas
    </button>
  </div>

  <center><div class="btn-group">
    <input id="boton" type="button" class="btn btn-default" value="A"/>
    <input id="boton" type="button" class="btn btn-default" value="B"/>
    <input id="boton" type="button" class="btn btn-default" value="C"/>
    <input id="boton" type="button" class="btn btn-default" value="D"/>
    <input id="boton" type="button" class="btn btn-default" value="E"/>
    <input id="boton" type="button" class="btn btn-default" value="F"/>
    <input id="boton" type="button" class="btn btn-default" value="G"/>
    <input id="boton" type="button" class="btn btn-default" value="H"/>
    <input id="boton" type="button" class="btn btn-default" value="I"/>
    <input id="boton" type="button" class="btn btn-default" value="J"/>
    <input id="boton" type="button" class="btn btn-default" value="K"/>
    <input id="boton" type="button" class="btn btn-default" value="L"/>
    <input id="boton" type="button" class="btn btn-default" value="M"/>
    <input id="boton" type="button" class="btn btn-default" value="N"/>
    <input id="boton" type="button" class="btn btn-default" value="Ñ"/>
    <input id="boton" type="button" class="btn btn-default" value="O"/>
    <input id="boton" type="button" class="btn btn-default" value="P"/>
    <input id="boton" type="button" class="btn btn-default" value="Q"/>
    <input id="boton" type="button" class="btn btn-default" value="R"/>
    <input id="boton" type="button" class="btn btn-default" value="S"/>
    <input id="boton" type="button" class="btn btn-default" value="T"/>
    <input id="boton" type="button" class="btn btn-default" value="U"/>
    <input id="boton" type="button" class="btn btn-default" value="V"/>
    <input id="boton" type="button" class="btn btn-default" value="W"/>
    <input id="boton" type="button" class="btn btn-default" value="X"/>
    <input id="boton" type="button" class="btn btn-default" value="Y"/>
    <input id="boton" type="button" class="btn btn-default" value="Z"/>
    <input id="boton" type="button" class="btn btn-default" value="Todos"/>

  </div></center>



  <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">
          Vigentes
        </h3>
      </div>
    <div class="panel-body">
    <div class="table-responsive">
        <table id="tabla-licencia" class="table table-striped table-bordered table-hover" data-source = "<%= listado_licencias_todas_lic_path(format: :json, rango: params['rango']) %>">
          <thead>
              <tr>
                <th>Establ.</th>
                <th>Destino</th>
                <th>Sec.</th>              
                <th>Tipo</th>
                <th>Horas</th>
                <th>Persona</th>
                <th>Sit. Rev.</th>    
                <th>Curso</th>
                <th>Div.</th>
                <th>Materia</th>
                <th>Artículo</th>
                <th class="text-center col-md-1">Fecha Desde</th>
                <th class="text-center col-md-1">Fecha Hasta</th>
                <th class="text-center col-md-1">Estado Actual</th>
                <th class="text-center col-md-1">Chequear</th>
                <th class="text-center col-md-1">Cancelar</th>
              </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </div>
  </div>


  <legend></legend>
  <center><div class="btn-group">
    <input id="boton" type="button" class="btn btn-default" value="A"/>
    <input id="boton" type="button" class="btn btn-default" value="B"/>
    <input id="boton" type="button" class="btn btn-default" value="C"/>
    <input id="boton" type="button" class="btn btn-default" value="D"/>
    <input id="boton" type="button" class="btn btn-default" value="E"/>
    <input id="boton" type="button" class="btn btn-default" value="F"/>
    <input id="boton" type="button" class="btn btn-default" value="G"/>
    <input id="boton" type="button" class="btn btn-default" value="H"/>
    <input id="boton" type="button" class="btn btn-default" value="I"/>
    <input id="boton" type="button" class="btn btn-default" value="J"/>
    <input id="boton" type="button" class="btn btn-default" value="K"/>
    <input id="boton" type="button" class="btn btn-default" value="L"/>
    <input id="boton" type="button" class="btn btn-default" value="M"/>
    <input id="boton" type="button" class="btn btn-default" value="N"/>
    <input id="boton" type="button" class="btn btn-default" value="Ñ"/>
    <input id="boton" type="button" class="btn btn-default" value="O"/>
    <input id="boton" type="button" class="btn btn-default" value="P"/>
    <input id="boton" type="button" class="btn btn-default" value="Q"/>
    <input id="boton" type="button" class="btn btn-default" value="R"/>
    <input id="boton" type="button" class="btn btn-default" value="S"/>
    <input id="boton" type="button" class="btn btn-default" value="T"/>
    <input id="boton" type="button" class="btn btn-default" value="U"/>
    <input id="boton" type="button" class="btn btn-default" value="V"/>
    <input id="boton" type="button" class="btn btn-default" value="W"/>
    <input id="boton" type="button" class="btn btn-default" value="X"/>
    <input id="boton" type="button" class="btn btn-default" value="Y"/>
    <input id="boton" type="button" class="btn btn-default" value="Z"/>
    <input id="boton" type="button" class="btn btn-default" value="Todos"/>
  </div></center>

  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">
        CHEQUEADAS
      </h3>
    </div>
    <div class="panel-body">
    <div class="table-responsive">
        <table id="tabla-licencia-cheqeadas-hs" class="table table-striped table-bordered table-hover" data-source = "<%= licencias_chequeadas_horas_path(format: :json, rango: params['rango']) %>">
          <thead>
              <tr>
                <th>Establ.</th>
                <th>Destino</th>
                <th>Sec.</th>              
                <th>Tipo</th>
                <th>Horas</th>
                <th>Persona</th>
                <th>Sit. Rev.</th>    
                <th>Curso</th>
                <th>Div.</th>
                <th>Materia</th>
                <th>Artículo</th>
                <th>Fecha Desde</th>
                <th>Fecha Hasta</th>
                <th>Estado Actual</th>
                <th>Chequeadas</th>
                <th></th>
              </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </div>


  </div>

<hr style="height:2px;border-width:0;color:red;background-color:#7b9eb2" />

</div>

<div id="auxiliares">

<h2>Cargos Auxiliares</h2>

  <div align="right">
   <button id="btn-filtrar2" class="btn btn-success">
   <span class="glyphicon glyphicon-download-alt"></span>
       Descargar Licencias de Cargos Auxiliares
    </button>
  </div>

  <center><div class="btn-group">
    <input id="boton" type="button" class="btn btn-default" value="A"/>
    <input id="boton" type="button" class="btn btn-default" value="B"/>
    <input id="boton" type="button" class="btn btn-default" value="C"/>
    <input id="boton" type="button" class="btn btn-default" value="D"/>
    <input id="boton" type="button" class="btn btn-default" value="E"/>
    <input id="boton" type="button" class="btn btn-default" value="F"/>
    <input id="boton" type="button" class="btn btn-default" value="G"/>
    <input id="boton" type="button" class="btn btn-default" value="H"/>
    <input id="boton" type="button" class="btn btn-default" value="I"/>
    <input id="boton" type="button" class="btn btn-default" value="J"/>
    <input id="boton" type="button" class="btn btn-default" value="K"/>
    <input id="boton" type="button" class="btn btn-default" value="L"/>
    <input id="boton" type="button" class="btn btn-default" value="M"/>
    <input id="boton" type="button" class="btn btn-default" value="N"/>
    <input id="boton" type="button" class="btn btn-default" value="Ñ"/>
    <input id="boton" type="button" class="btn btn-default" value="O"/>
    <input id="boton" type="button" class="btn btn-default" value="P"/>
    <input id="boton" type="button" class="btn btn-default" value="Q"/>
    <input id="boton" type="button" class="btn btn-default" value="R"/>
    <input id="boton" type="button" class="btn btn-default" value="S"/>
    <input id="boton" type="button" class="btn btn-default" value="T"/>
    <input id="boton" type="button" class="btn btn-default" value="U"/>
    <input id="boton" type="button" class="btn btn-default" value="V"/>
    <input id="boton" type="button" class="btn btn-default" value="W"/>
    <input id="boton" type="button" class="btn btn-default" value="X"/>
    <input id="boton" type="button" class="btn btn-default" value="Y"/>
    <input id="boton" type="button" class="btn btn-default" value="Z"/>
    <input id="boton" type="button" class="btn btn-default" value="Todos"/>
  </div></center>


  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">
        Vigentes
      </h3>
    </div>
    <div class="panel-body">
    <div class="table-responsive">
        <table id="tabla-licencia-cnds" class="table table-striped table-bordered table-hover" data-source = "<%= listado_licencias_cnds_sg_path(format: :json, rango: params['rango']) %>">
          <thead>
              <tr>
                <th>Establ</th>
                <th>Organismo destino</th>
                <th>Sec.</th>               
                <th>Tipo</th>
                <th>Cargo</th>
                <th>Persona</th>
                <th>Situación Rev.</th>    
                <th>Artículo</th>
                <th class="text-center col-md-1">Fecha Desde</th>
                <th class="text-center col-md-1">Fecha Hasta</th>
                <th class="text-center col-md-1">Estado LIC</th>
                <th class="text-center col-md-1">Chequear</th>
                <th class="text-center col-md-1">Cancelar</th>
              </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </div>
  </div>


  <br/>
  <center><div class="btn-group">
    <input id="boton" type="button" class="btn btn-default" value="A"/>
    <input id="boton" type="button" class="btn btn-default" value="B"/>
    <input id="boton" type="button" class="btn btn-default" value="C"/>
    <input id="boton" type="button" class="btn btn-default" value="D"/>
    <input id="boton" type="button" class="btn btn-default" value="E"/>
    <input id="boton" type="button" class="btn btn-default" value="F"/>
    <input id="boton" type="button" class="btn btn-default" value="G"/>
    <input id="boton" type="button" class="btn btn-default" value="H"/>
    <input id="boton" type="button" class="btn btn-default" value="I"/>
    <input id="boton" type="button" class="btn btn-default" value="J"/>
    <input id="boton" type="button" class="btn btn-default" value="K"/>
    <input id="boton" type="button" class="btn btn-default" value="L"/>
    <input id="boton" type="button" class="btn btn-default" value="M"/>
    <input id="boton" type="button" class="btn btn-default" value="N"/>
    <input id="boton" type="button" class="btn btn-default" value="Ñ"/>
    <input id="boton" type="button" class="btn btn-default" value="O"/>
    <input id="boton" type="button" class="btn btn-default" value="P"/>
    <input id="boton" type="button" class="btn btn-default" value="Q"/>
    <input id="boton" type="button" class="btn btn-default" value="R"/>
    <input id="boton" type="button" class="btn btn-default" value="S"/>
    <input id="boton" type="button" class="btn btn-default" value="T"/>
    <input id="boton" type="button" class="btn btn-default" value="U"/>
    <input id="boton" type="button" class="btn btn-default" value="V"/>
    <input id="boton" type="button" class="btn btn-default" value="W"/>
    <input id="boton" type="button" class="btn btn-default" value="X"/>
    <input id="boton" type="button" class="btn btn-default" value="Y"/>
    <input id="boton" type="button" class="btn btn-default" value="Z"/>
    <input id="boton" type="button" class="btn btn-default" value="Todos"/>
  </div></center>


  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">
        Chequeadas
      </h3> 
    </div>
    <div class="panel-body">
    <div class="table-responsive">
        <table id="tabla-licencia-cheqeadas-cnds" class="table table-striped table-bordered table-hover" data-source = "<%= listado_licencias_cnds_sg_chequeadas_path(format: :json, rango: params['rango']) %>">
          <thead>
              <tr>
                <th>Establ</th>
                <th>Organismo destino</th>
                <th>Sec.</th>               
                <th>Tipo</th>
                <th>Cargo</th>
                <th>Persona</th>
                <th>Situación Rev.</th>    
                <th>Artículo</th>
                <th class="text-center col-md-1">Fecha Desde</th>
                <th class="text-center col-md-1">Fecha Hasta</th>
                <th class="text-center col-md-1">Estado LIC</th>
                <th class="text-center col-md-1">Chequeadas</th>
                <th class="text-center col-md-1"></th>
              </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <hr style="height:2px;border-width:0;color:red;background-color:#7b9eb2" />

</div>

<div id="cargos">
<h2>Cargos Docentes</h2>

  <div align="right">
   <button id="btn-filtrar3" class="btn btn-success">
   <span class="glyphicon glyphicon-download-alt"></span>
        Descargar Licencias de Cargos
    </button>
  </div>


  <center><div class="btn-group">
    <input id="boton" type="button" class="btn btn-default" value="A"/>
    <input id="boton" type="button" class="btn btn-default" value="B"/>
    <input id="boton" type="button" class="btn btn-default" value="C"/>
    <input id="boton" type="button" class="btn btn-default" value="D"/>
    <input id="boton" type="button" class="btn btn-default" value="E"/>
    <input id="boton" type="button" class="btn btn-default" value="F"/>
    <input id="boton" type="button" class="btn btn-default" value="G"/>
    <input id="boton" type="button" class="btn btn-default" value="H"/>
    <input id="boton" type="button" class="btn btn-default" value="I"/>
    <input id="boton" type="button" class="btn btn-default" value="J"/>
    <input id="boton" type="button" class="btn btn-default" value="K"/>
    <input id="boton" type="button" class="btn btn-default" value="L"/>
    <input id="boton" type="button" class="btn btn-default" value="M"/>
    <input id="boton" type="button" class="btn btn-default" value="N"/>
    <input id="boton" type="button" class="btn btn-default" value="Ñ"/>
    <input id="boton" type="button" class="btn btn-default" value="O"/>
    <input id="boton" type="button" class="btn btn-default" value="P"/>
    <input id="boton" type="button" class="btn btn-default" value="Q"/>
    <input id="boton" type="button" class="btn btn-default" value="R"/>
    <input id="boton" type="button" class="btn btn-default" value="S"/>
    <input id="boton" type="button" class="btn btn-default" value="T"/>
    <input id="boton" type="button" class="btn btn-default" value="U"/>
    <input id="boton" type="button" class="btn btn-default" value="V"/>
    <input id="boton" type="button" class="btn btn-default" value="W"/>
    <input id="boton" type="button" class="btn btn-default" value="X"/>
    <input id="boton" type="button" class="btn btn-default" value="Y"/>
    <input id="boton" type="button" class="btn btn-default" value="Z"/>
    <input id="boton" type="button" class="btn btn-default" value="Todos"/>

  </div></center>


  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">
        Vigentes
      </h3>
    </div>
    <div class="panel-body">
    <div class="table-responsive">
        <table id="tabla-licencia-cargos" class="table table-striped table-bordered table-hover" data-source = "<%= listado_licencias_carg_sg_path(format: :json, rango: params['rango']) %>">
          <thead>
              <tr>
                <th>Establ</th>
                <th>Destino</th>                             
                <th>Sec.</th>               
                <th>Tipo</th>
                <th>Cargo</th>
                <th>Persona</th>
                <th>Sit. Rev.</th>    
                <th>Curso</th>
                <th>Div.</th>
                <th>Artículo</th>
                <th class="text-center col-md-1">Fecha Desde</th>
                <th class="text-center col-md-1">Fecha Hasta</th>
                <th class="text-center col-md-1">Estado LIC</th>
                <th class="text-center col-md-1">Chequear</th>
                <th class="text-center col-md-1">Cancelar</th>
              </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <center><div class="btn-group">
    <input id="boton" type="button" class="btn btn-default" value="A"/>
    <input id="boton" type="button" class="btn btn-default" value="B"/>
    <input id="boton" type="button" class="btn btn-default" value="C"/>
    <input id="boton" type="button" class="btn btn-default" value="D"/>
    <input id="boton" type="button" class="btn btn-default" value="E"/>
    <input id="boton" type="button" class="btn btn-default" value="F"/>
    <input id="boton" type="button" class="btn btn-default" value="G"/>
    <input id="boton" type="button" class="btn btn-default" value="H"/>
    <input id="boton" type="button" class="btn btn-default" value="I"/>
    <input id="boton" type="button" class="btn btn-default" value="J"/>
    <input id="boton" type="button" class="btn btn-default" value="K"/>
    <input id="boton" type="button" class="btn btn-default" value="L"/>
    <input id="boton" type="button" class="btn btn-default" value="M"/>
    <input id="boton" type="button" class="btn btn-default" value="N"/>
    <input id="boton" type="button" class="btn btn-default" value="Ñ"/>
    <input id="boton" type="button" class="btn btn-default" value="O"/>
    <input id="boton" type="button" class="btn btn-default" value="P"/>
    <input id="boton" type="button" class="btn btn-default" value="Q"/>
    <input id="boton" type="button" class="btn btn-default" value="R"/>
    <input id="boton" type="button" class="btn btn-default" value="S"/>
    <input id="boton" type="button" class="btn btn-default" value="T"/>
    <input id="boton" type="button" class="btn btn-default" value="U"/>
    <input id="boton" type="button" class="btn btn-default" value="V"/>
    <input id="boton" type="button" class="btn btn-default" value="W"/>
    <input id="boton" type="button" class="btn btn-default" value="X"/>
    <input id="boton" type="button" class="btn btn-default" value="Y"/>
    <input id="boton" type="button" class="btn btn-default" value="Z"/>
    <input id="boton" type="button" class="btn btn-default" value="Todos"/>

  </div></center>


  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">
        Chequeadas
      </h3>
    </div>
    <div class="panel-body">
    <div class="table-responsive">
        <table id="tabla-licencia-cargos-cheq" class="table table-striped table-bordered table-hover" data-source = "<%= listado_licencias_carg_sg_chequeadas_path(format: :json, rango: params['rango']) %>">
          <thead>
              <tr>
                <th>Establ</th>
                <th>Destino</th>                             
                <th>Sec.</th>               
                <th>Tipo</th>
                <th>Cargo</th>
                <th>Persona</th>
                <th>Sit. Rev.</th>    
                <th>Curso</th>
                <th>Div.</th>
                <th>Artículo</th>
                <th class="text-center col-md-1">Fecha Desde</th>
                <th class="text-center col-md-1">Fecha Hasta</th>
                <th class="text-center col-md-1">Estado LIC</th>
                <th class="text-center col-md-1">Chequeadas</th>
                <th class="text-center col-md-1"></th>
              </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modal_cargos_obs" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Agregar Observaciones</h4>
      </div>
      <div class="modal-body">
          <div id="obv2">
               <%= text_area_tag 'observaciones3', nil, :class => "form-control col-sm-6"%>
          </div>
          </br>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
            <button type="button" id="btn_editar_obs3" class="btn btn-default" data-dismiss="modal">Guardar</button>
          </div>
        </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modal_cnd_obs" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Agregar Observaciones</h4>
      </div>
      <div class="modal-body">
          <div id="obv2">
               <%= text_area_tag 'observaciones2', nil, :class => "form-control col-sm-6"%>
          </div>
          </br>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
            <button type="button" id="btn_editar_obs2" class="btn btn-default" data-dismiss="modal">Guardar</button>
          </div>
        </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modal_horas_obs" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Agregar Observaciones</h4>
      </div>
      <div class="modal-body">
          <div id="obv2">
               <%= text_area_tag 'observaciones', nil, :class => "form-control col-sm-6"%>
          </div>
          </br>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
            <button type="button" id="btn_editar_obs" class="btn btn-default" data-dismiss="modal">Guardar</button>
          </div>
        </div>
    </div>
  </div>
</div>


<script>


$(document).ready(function($) {

      $('#cargos').hide();
      $('#hhs').hide();
      $('#auxiliares').hide();
  });

  $( "#aux" ).on( "click", function() {
      $('#cargos').hide();
      $('#hhs').hide();
      $('#auxiliares').show();
  });
  $( "#doc" ).on( "click", function() {
      $('#cargos').show();
      $('#hhs').hide();
      $('#auxiliares').hide();
  });
  $( "#hs" ).on( "click", function() {
      $('#cargos').hide();
      $('#hhs').show();
      $('#auxiliares').hide();
  });

$("input:button").click(function()
  {
    $.ajax({
      url: '/soft/snpe/licencias/obtenerdatarange?rango='+$('#daterange').val(),
      type: 'GET',
    })
    .done(function(data) {
      window.data2 = data[0].toString();
    }); 
    window.boton = ($(this).val());
    tabla_licencia.api().ajax.url('/soft/snpe/licencias/listado_licencias_todas_lic.json?letra='+window.boton+'&rango='+$('#daterange').val());
    tabla_licencia.api().ajax.reload();
    tabla_licencia_hs.api().ajax.url('/soft/snpe/licencias/licencias_chequeadas_horas.json?letra='+window.boton+'&rango='+$('#daterange').val());
    tabla_licencia_hs.api().ajax.reload();
    tabla_licencia_crg.api().ajax.url('/soft/snpe/licencias/listado_licencias_carg_sg?letra='+window.boton+'&rango='+$('#daterange').val());
    tabla_licencia_crg.api().ajax.reload();
    tabla_licencia_cargnds.api().ajax.url('/soft/snpe/licencias/listado_licencias_cnds_sg?letra='+window.boton+'&rango='+$('#daterange').val());
    tabla_licencia_cargnds.api().ajax.reload();
    tabla_licencia_cargnds_cheq.api().ajax.url('/soft/snpe/licencias/listado_licencias_cnds_sg_chequeadas?letra='+window.boton+'&rango='+$('#daterange').val());
    tabla_licencia_cargnds_cheq.api().ajax.reload();
    tabla_licencia_crg_cheq.api().ajax.url('/soft/snpe/licencias/listado_licencias_carg_sg_chequeadas?letra='+window.boton+'&rango='+$('#daterange').val());
    tabla_licencia_crg_cheq.api().ajax.reload();
  });

  $('#daterange').on('apply.daterangepicker', function(ev, picker) {
    tabla_licencia.api().ajax.url('/soft/snpe/licencias/listado_licencias_todas_lic.json?rango='+$('#daterange').val());
    tabla_licencia.api().ajax.reload();
    tabla_licencia_hs.api().ajax.url('/soft/snpe/licencias/licencias_chequeadas_horas.json?rango='+$('#daterange').val());
    tabla_licencia_hs.api().ajax.reload();
    tabla_licencia_crg.api().ajax.url('/soft/snpe/licencias/listado_licencias_carg_sg?rango='+$('#daterange').val());
    tabla_licencia_crg.api().ajax.reload();
    tabla_licencia_cargnds.api().ajax.url('/soft/snpe/licencias/listado_licencias_cnds_sg?rango='+$('#daterange').val());
    tabla_licencia_cargnds.api().ajax.reload();
    tabla_licencia_cargnds_cheq.api().ajax.url('/soft/snpe/licencias/listado_licencias_cnds_sg_chequeadas?rango='+$('#daterange').val());
    tabla_licencia_cargnds_cheq.api().ajax.reload();
    tabla_licencia_crg_cheq.api().ajax.url('/soft/snpe/licencias/listado_licencias_carg_sg_chequeadas?rango='+$('#daterange').val());
    tabla_licencia_crg_cheq.api().ajax.reload();
    });



    //Define el idioma de combodate
    moment.locale('es');
    $.fn.editable.defaults.mode = 'inline';
  	var tabla_licencia = $('#tabla-licencia').dataTable({
  	    language : {"sUrl": "<%= asset_path('language.es.json') %>",},
  	    "scrollX": true,
  	    processing : true,
  	    serverSide : true,
  	    ajax : $('#tabla-licencia').data('source'),
  	    pagingType: "full",
        scrollY: '50vh',
        scrollCollapse: true,

  	  })
      .on('draw.dt', function () {
        $( ".btn-ajax" ).on( "click", function() {
          var data_url = $(this).attr('data-url');
          $.ajax({
            url: data_url,
            type: 'GET',
          })
          .done(function(data) {
            if (data.status == 'error') {
              alert(data.msj);
              return;
            }
            $.ajax({
              url: '/soft/snpe/licencias/obtenerdatarange?rango='+$('#daterange').val(),
              type: 'GET',
            })
            .done(function(data) {
              window.data2 = data[0].toString();
            }); 
            if ((window.data2 != undefined && window.data2 != "") && (window.boton != undefined && window.boton != "")){
              tabla_licencia.api().ajax.url('/soft/snpe/licencias/listado_licencias_todas_lic?rango='+window.data2+"&letra="+window.boton);
              tabla_licencia.api().ajax.reload(null, false); 
            }else if ((window.data2 != undefined && window.data2 != "") && (window.boton == undefined || window.boton == "")) {
              tabla_licencia.api().ajax.url('/soft/snpe/licencias/listado_licencias_todas_lic?rango='+window.data2);
              tabla_licencia.api().ajax.reload(null, false); 
            }else if ((window.data2 == undefined || window.data2 == "") && (window.boton != undefined && window.boton != "")) {
              tabla_licencia.api().ajax.url('/soft/snpe/licencias/listado_licencias_todas_lic?letra='+window.boton);
              tabla_licencia.api().ajax.reload(null, false); 
            }else{
              tabla_licencia.api().ajax.url('/soft/snpe/licencias/listado_licencias_todas_lic');
              tabla_licencia.api().ajax.reload(null, false); 
            }
          });
        });
      });



    //Define el idioma de combodate
    moment.locale('es');
    $.fn.editable.defaults.mode = 'inline';
    var tabla_licencia_hs = $('#tabla-licencia-cheqeadas-hs').dataTable({
        language : {"sUrl": "<%= asset_path('language.es.json') %>",},
        "scrollX": true,
        processing : true,
        serverSide : true,
        ajax : $('#tabla-licencia-cheqeadas-hs').data('source'),
        pagingType: "full",
        scrollY: '50vh',
        scrollCollapse: true,


      })
      .on('draw.dt', function () {
        $( ".btn-ajax" ).on( "click", function() {
          var data_url = $(this).attr('data-url');
          $.ajax({
            url: data_url,
            type: 'GET',
          })
          .done(function(data) {
            if (data.status == 'error') {
              alert(data.msj);
              return;
            }
            $.ajax({
              url: '/soft/snpe/licencias/obtenerdatarange?rango='+$('#daterange').val(),
              type: 'GET',
            })
            .done(function(data) {
              window.data2 = data[0].toString();
            }); 
            if ((window.data2 != undefined && window.data2 != "") && (window.boton != undefined && window.boton != "")){
              tabla_licencia_hs.api().ajax.url('/soft/snpe/licencias/licencias_chequeadas_horas?rango='+window.data2+"&letra="+window.boton);
              tabla_licencia_hs.api().ajax.reload(null, false); 
            }else if ((window.data2 != undefined && window.data2 != "") && (window.boton == undefined || window.boton == "")) {
              tabla_licencia_hs.api().ajax.url('/soft/snpe/licencias/licencias_chequeadas_horas?rango='+window.data2);
              tabla_licencia_hs.api().ajax.reload(null, false); 
            }else if ((window.data2 == undefined || window.data2 == "") && (window.boton != undefined && window.boton != "")) {
              tabla_licencia_hs.api().ajax.url('/soft/snpe/licencias/licencias_chequeadas_horas?letra='+window.boton);
              tabla_licencia_hs.api().ajax.reload(null, false); 
            }else{
              tabla_licencia_hs.api().ajax.url('/soft/snpe/licencias/licencias_chequeadas_horas');
              tabla_licencia_hs.api().ajax.reload(null, false); 
            }

          });
        });
      });


    //Define el idioma de combodate
    moment.locale('es');
    $.fn.editable.defaults.mode = 'inline';
    var tabla_licencia_cargnds_cheq = $('#tabla-licencia-cheqeadas-cnds').dataTable({
        language : {"sUrl": "<%= asset_path('language.es.json') %>",},
        "scrollX": true,
        processing : true,
        serverSide : true,
        ajax : $('#tabla-licencia-cheqeadas-cnds').data('source'),
        pagingType: "full",
        scrollY: '50vh',
        scrollCollapse: true,


      })
      .on('draw.dt', function () {
        $( ".btn-ajax" ).on( "click", function() {
          var data_url = $(this).attr('data-url');
          $.ajax({
            url: data_url,
            type: 'GET',
          })
          .done(function(data) {
            if (data.status == 'error') {
              alert(data.msj);
              return;
            }
            $.ajax({
              url: '/soft/snpe/licencias/obtenerdatarange?rango='+$('#daterange').val(),
              type: 'GET',
            })
            .done(function(data) {
              window.data2 = data[0].toString();
            }); 


              tabla_licencia_cargnds_cheq.api().ajax.url('/soft/snpe/licencias/listado_licencias_cnds_sg_chequeadas?rango='+window.data2+"&letra="+window.boton);
              tabla_licencia_cargnds_cheq.api().ajax.reload(null, false);
              
 
          });
        });
      });
    

    var date = new Date();
    $('#daterange').daterangepicker({
      format: 'DD/MM/YYYY',
      startDate: new Date(date.getFullYear(), date.getMonth(), 1),
      endDate: Date.today,
      minDate: '01/01/2000',
      maxDate: '31/12/2030',
      locale: {
        applyLabel: 'Ir',
        cancelLabel: 'Cancelar',
        fromLabel: 'Desde',
        toLabel: 'Hasta',
        firstDay: 1
      }
    });



    function getParams1() {
      var params = '?rango=' + $('#daterange').val();
      return  params
     }
       
    $('#btn-filtrar1').on('click', function(){
     window.location.href = '/soft/snpe/licencias/listado_licencias_todas_lic.xls?rango='+$('#daterange').val()+"&letra="+window.boton;
    })


    moment.locale('es');
    var tabla_licencia_cargnds = $('#tabla-licencia-cnds').dataTable({
        language : {"sUrl": "<%= asset_path('language.es.json') %>",},
        "scrollX": true,
        processing : true,
        serverSide : true,
        ajax : $('#tabla-licencia-cnds').data('source'),
        pagingType: "simple",
        scrollY: '50vh',
        scrollCollapse: true,
        })
        .on('draw.dt', function () {
        $( ".btn-ajax1" ).on( "click", function() {
          var data_url = $(this).attr('data-url');
          $.ajax({
            url: data_url,
            type: 'GET',
          })
          .done(function(data) {
             $.ajax({
              url: '/soft/snpe/licencias/obtenerdatarange?rango='+$("#daterange").val(),
              type: 'GET',
            })
            .done(function(data) {
              window.data4 = data[0].toString();
            });
            if ((window.data2 != undefined && window.data2 != "") && (window.boton != undefined && window.boton != "")){
              tabla_licencia_cargnds.api().ajax.url('/soft/snpe/licencias/listado_licencias_cnds_sg?rango='+window.data2+"&letra="+window.boton);
              tabla_licencia_cargnds.api().ajax.reload(null, false); 
            }else if ((window.data2 != undefined && window.data2 != "") && (window.boton == undefined || window.boton == "")) {
              tabla_licencia_cargnds.api().ajax.url('/soft/snpe/licencias/listado_licencias_cnds_sg?rango='+window.data2);
              tabla_licencia_cargnds.api().ajax.reload(null, false); 
            }else if ((window.data2 == undefined || window.data2 == "") && (window.boton != undefined && window.boton != "")) {
              tabla_licencia_cargnds.api().ajax.url('/soft/snpe/licencias/listado_licencias_cnds_sg?letra='+window.boton);
              tabla_licencia_cargnds.api().ajax.reload(null, false); 
            }else{
              tabla_licencia_cargnds.api().ajax.url('/soft/snpe/licencias/listado_licencias_cnds_sg');
              tabla_licencia_cargnds.api().ajax.reload(null, false); 
            }
              
          });
        });
      });


      var d = new Date();
      $('#btn-filtrar2').on('click', function(){
       window.location.href = '/soft/snpe/licencias/listado_licencias_cnds_sg.xls?rango='+ d.val()+"&letra="+window.boton;
      });

      moment.locale('es');
      var tabla_licencia_crg = $('#tabla-licencia-cargos').dataTable({
          language : {"sUrl": "<%= asset_path('language.es.json') %>",},
          "scrollX": true,
          processing : true,
          serverSide : true,
          ajax : $('#tabla-licencia-cargos').data('source'),
          pagingType: "simple",
          scrollY: '50vh',
          scrollCollapse: true,
        })
        .on('draw.dt', function () {
          $( ".btn-ajax2" ).on( "click", function() {
            var data_url = $(this).attr('data-url');
            $.ajax({
              url: data_url,
              type: 'GET',
            })
            .done(function(data) {
               $.ajax({
                url: '/soft/snpe/licencias/obtenerdatarange?rango='+$("#daterange").val(),
                type: 'GET',
              })
              .done(function(data) {
                window.data3 = data[0].toString();

              });

              if ((window.data2 != undefined && window.data2 != "") && (window.boton != undefined && window.boton != "")){
                tabla_licencia_crg.api().ajax.url('/soft/snpe/licencias/listado_licencias_carg_sg?rango='+window.data2+"&letra="+window.boton);
                tabla_licencia_crg.api().ajax.reload(null, false); 
              }else if ((window.data2 != undefined && window.data2 != "") && (window.boton == undefined || window.boton == "")) {
                tabla_licencia_crg.api().ajax.url('/soft/snpe/licencias/listado_licencias_carg_sg?rango='+window.data2);
                tabla_licencia_crg.api().ajax.reload(null, false); 
              }else if ((window.data2 == undefined || window.data2 == "") && (window.boton != undefined && window.boton != "")) {
                tabla_licencia_crg.api().ajax.url('/soft/snpe/licencias/listado_licencias_carg_sg?letra='+window.boton);
                tabla_licencia_crg.api().ajax.reload(null, false); 
              }else{
                tabla_licencia_crg.api().ajax.url('/soft/snpe/licencias/listado_licencias_carg_sg');
                tabla_licencia_crg.api().ajax.reload(null, false); 
            }

            });
          });
        });


    moment.locale('es');
    var tabla_licencia_crg_cheq = $('#tabla-licencia-cargos-cheq').dataTable({
        language : {"sUrl": "<%= asset_path('language.es.json') %>",},
        "scrollX": true,
        processing : true,
        serverSide : true,
        ajax : $('#tabla-licencia-cargos-cheq').data('source'),
        pagingType: "simple",
        scrollY: '50vh',
        scrollCollapse: true,
      })
      .on('draw.dt', function () {
        $( ".btn-ajax2" ).on( "click", function() {
          var data_url = $(this).attr('data-url');
          $.ajax({
            url: data_url,
            type: 'GET',
          })
          .done(function(data) {
             $.ajax({
              url: '/soft/snpe/licencias/obtenerdatarange?rango='+$("#daterange").val(),
              type: 'GET',
            })
            .done(function(data) {
              window.data3 = data[0].toString();

            });

               if ((window.data2 != undefined && window.data2 != "") && (window.boton != undefined && window.boton != "")){
                tabla_licencia_crg_cheq.api().ajax.url('/soft/snpe/licencias/listado_licencias_carg_sg_chequeadas?rango='+window.data2+"&letra="+window.boton);
                tabla_licencia_crg_cheq.api().ajax.reload(null, false); 
              }else if ((window.data2 != undefined && window.data2 != "") && (window.boton == undefined || window.boton == "")) {
                tabla_licencia_crg_cheq.api().ajax.url('/soft/snpe/licencias/listado_licencias_carg_sg_chequeadas?rango='+window.data2);
                tabla_licencia_crg_cheq.api().ajax.reload(null, false); 
              }else if ((window.data2 == undefined || window.data2 == "") && (window.boton != undefined && window.boton != "")) {
                tabla_licencia_crg_cheq.api().ajax.url('/soft/snpe/licencias/listado_licencias_carg_sg_chequeadas?letra='+window.boton);
                tabla_licencia_crg_cheq.api().ajax.reload(null, false); 
              }else{
                tabla_licencia_crg_cheq.api().ajax.url('/soft/snpe/licencias/listado_licencias_carg_sg_chequeadas');
                tabla_licencia_crg_cheq.api().ajax.reload(null, false); 
            }

          });
        });
      });


    $('#btn-filtrar3').on('click', function(){
     window.location.href = '/soft/snpe/licencias/listado_licencias_carg_sg.xls?rango='+$('#daterange').val()+"&letra="+window.boton;
    })


  $('#btn_editar_obs').on('click', function () {
    observaciones = $("#observaciones").val();
    $.ajax({
      url: '/soft/snpe/licencia/cancelar_sin_goce/?id_licencia='+id_lic+'&observaciones='+encodeURIComponent(observaciones),
      type: 'POST',
      })
    .done(function(data) {
      tabla_licencia.api().ajax.url('/soft/snpe/licencias/listado_licencias_todas_lic?rango='+window.data2+"&letra="+window.boton);
      tabla_licencia.api().ajax.reload(null, false);
      tabla_licencia_hs.api().ajax.url('/soft/snpe/licencias/licencias_chequeadas_horas?rango='+window.data2+"&letra="+window.boton);
      tabla_licencia_hs.api().ajax.reload(null, false);
    })
  });

  $('#btn_editar_obs2').on('click', function () {
    observaciones = $("#observaciones2").val();
    $.ajax({
      url: '/soft/snpe/licencia/cancelar_sin_goce/?id_licencia='+id_lic+'&observaciones='+encodeURIComponent(observaciones),
      type: 'POST',
      })
    .done(function(data) {
      tabla_licencia_cargnds.api().ajax.url('/soft/snpe/licencias/listado_licencias_cnds_sg?rango='+window.data2+"&letra="+window.boton);
      tabla_licencia_cargnds.api().ajax.reload(null, false);
      tabla_licencia_cargnds_cheq.api().ajax.url('/soft/snpe/licencias/listado_licencias_cnds_sg_chequeadas?rango='+window.data2+"&letra="+window.boton);
      tabla_licencia_cargnds_cheq.api().ajax.reload(null, false);
    })
  });

  $('#btn_editar_obs3').on('click', function () {
    observaciones = $("#observaciones3").val();
    $.ajax({
      url: '/soft/snpe/licencia/cancelar_sin_goce/?id_licencia='+id_lic+'&observaciones='+encodeURIComponent(observaciones),
      type: 'POST',
      })
    .done(function(data) {
      tabla_licencia_crg.api().ajax.url('/soft/snpe/licencias/listado_licencias_carg_sg?rango='+window.data2+"&letra="+window.boton);
      tabla_licencia_crg.api().ajax.reload(null, false);
      tabla_licencia_crg_cheq.api().ajax.url('/soft/snpe/licencias/listado_licencias_carg_sg_chequeadas?rango='+window.data4+"&letra="+window.boton);
      tabla_licencia_crg_cheq.api().ajax.reload();
    })
  });


  $('#modal_horas_obs').on('shown.bs.modal', function (event) {  
      id_lic = $(event.relatedTarget).attr('id_lic');
      $("#observaciones").val($(event.relatedTarget).attr('obs_sin_goce_cancelacion'));
    });
  $('#modal_cnd_obs').on('shown.bs.modal', function (event) {  
      id_lic = $(event.relatedTarget).attr('id_lic');
      $("#observaciones2").val($(event.relatedTarget).attr('obs_sin_goce_cancelacion'));
    });
  $('#modal_cargos_obs').on('shown.bs.modal', function (event) {  
      id_lic = $(event.relatedTarget).attr('id_lic');
      $("#observaciones3").val($(event.relatedTarget).attr('obs_sin_goce_cancelacion'));
    });
</script>
