<% @altas_bajas_hora = AltasBajasHora.new %>
<div class="container">

  <legend>Listado de Bajas Permitidas y Realizadas</legend>

  <div class="panel panel-info">
    <div class="panel-heading">
      <h3 class="panel-title">
        Bajas Permitidas
      </h3>
    </div>
    <div class="panel-body">
    <div class="table-responsive">
      <table id="tabla-bajas" class="table table-striped table-bordered table-hover" data-source = "<%= altas_bajas_horas_index_bajas_path(format: :json) %>" >
        <thead>
          <tr>
            <th>DNI</th>
            <th>CUIL</th>
            <th>Apellido</th>
            <th>Nombre</th>
            <th>Secuencia</th>
            <th>CJ</th>
            <th>Cue</th>
            <th>Establecimiento</th>
            <th>Curso</th>
            <th>Div</th>
            <th>Fecha Alta</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
    </div>
  </div>

  <hr/>

  <div class="panel panel-success">
    <div class="panel-heading">
      <h3 class="panel-title">
        Bajas Realizadas
      </h3>
    </div>
    <div class="panel-body">
      <div class="table-responsive">
        <table id="tabla-bajas_efectivas" class="table table-striped table-bordered table-hover" data-source = "<%= altas_bajas_horas_index_bajas_efectivas_path(format: :json) %>" >
          <thead>
            <tr>
              <th>CJ</th>
              <th>Cue</th>
              <th>DNI</th>
              <th>Apellido</th>
              <th>Nombre</th>
              <th>CUIL</th>
              <th>Fecha Alta</th>
              <th>Fecha Baja</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </div>
  </div>

</div>

<script type="text/javascript">
  $(document).ready(function($) {

    //Define el idioma de combodate
    moment.lang('es');

    //define el modo de visualizacion del x-editable
    $.fn.editable.defaults.mode = 'popup';

    //Carga DT
    $('#tabla-bajas_efectivas')
      .dataTable({
        language : {"sUrl": "<%= asset_path('language.es.json') %>",},
        processing : true,
        serverSide : true,
        ajax : $('#tabla-bajas_efectivas').data('source'),
        pagingType: "simple",
        "pageLength": 5,
      });

    //Carga DT
    $('#tabla-bajas')
      .on('draw.dt', function () {
        $('.popup-fecha')
          .on('save', function(e, params) {
            location.reload();
          })
          .editable();
      })
      .dataTable({
        language : {"sUrl": "<%= asset_path('language.es.json') %>",},
        processing: true,
        serverSide: true,
        ajax : $('#tabla-bajas').data('source'),
        pagingType: "simple",
        "pageLength": 5,
      });
  });
</script>