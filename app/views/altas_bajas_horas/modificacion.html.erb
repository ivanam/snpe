<%= javascript_include_tag "altas_bajas_horas" %>
<%= javascript_include_tag "util.js" %>
<%= javascript_include_tag "daterangepicker"%>
<%= stylesheet_link_tag "daterangepicker-bs3" %>


<div class="container">

	</br>

	<legend class="legend-small">Modificacion de Horas</legend>  



	<% if (current_user.role? :escuela) || (current_user.role? :sadmin) then %>
		<div class="panel panel-primary ">
			<div class="panel-heading">
				<h3 class="panel-title">
				
				</h3>
			</div>
			<div class="panel-body">
			<div class="table-responsive">
					<table id="tabla-altas_bajas_hora2" class="table table-striped table-bordered table-hover" data-source = "<%= altas_bajas_horas_modificacion_path(format: :json) %>" >


						<thead>
							<tr>
								<th>DNI</th>
								<th>Nombre</th>
								<th>Sit. Rev</th>
								<th>Horas</th>              
								<th>Ciclo</th>
								<th>Curso</th>
								<th>Div</th>
								<th>Turno</th>
								<th>Codif.</th>
								<th>Fecha Alta</th>
							</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<hr/>
	<% end %>

	<script type="text/javascript">
$(document).ready(function($) {

	$.fn.editable.defaults.mode = 'inline';
	var tabla_altas_bajas = $('#tabla-altas_bajas_hora2').dataTable({
		language : {"sUrl": "<%= asset_path('language.es.json') %>",},
		processing : true,
		serverSide : true,
		ajax : $('#tabla-altas_bajas_hora2').data('source'),
		pagingType: "simple",
		"initComplete": function(settings, json) {

        $('.division').editable();
        $('.anio').editable();
      },
	})
	.on('draw.dt', function () {
		$( ".btn-ajax" ).on( "click", function() {
			var data_url = $(this).attr('data-url');
			$.ajax({
				url: data_url,
				type: 'GET',
			})
			.done(function(data) {
				tabla_altas_bajas.api().ajax.reload();
			});
		});
	});
	
	var date = new Date();
	$('#daterange').daterangepicker({
		format: 'DD/MM/YYYY',
		startDate: new Date(date.getFullYear(), date.getMonth(), 1),
		endDate: Date.today,
		minDate: '01/01/2000',
		maxDate: '31/12/2030',
		locale: {
			applyLabel: 'Ir',
			cancelLabel: 'Cancelar',
			fromLabel: 'Desde',
			toLabel: 'Hasta',
			firstDay: 1
		}
	});

});
</script>