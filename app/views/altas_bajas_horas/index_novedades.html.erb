<%= javascript_include_tag "daterangepicker"%>
<%= stylesheet_link_tag "daterangepicker-bs3" %>

<div class="">
  <b>Periodo: </b> <input type="text" id="daterange" /> </br></br>
</div>


<div class="container">
  <hr/>
  <div class="panel panel-primary ">
    <div class="panel-heading">
      <h3 class="panel-title">
        Novedades
      </h3>
    </div>
    <div class="panel-body">
    <div class="table-responsive">
        <table id="tabla-horas_novedades" class="table table-striped table-bordered table-hover" data-source = "<%= horas_index_novedades_path(format: :json, rango: params['rango']) %>" >
          <thead>
            <tr>
              <th>DNI</th>
              <th>Nombres</th>
              <th>Sit. Rev</th>
              <th>Horas</th>              
              <th>Ciclo</th>
              <th>Curso</th>
              <th>Div</th>
              <th>Turno</th>
              <th>Codif.</th>
              <th>Oblig</th>
              <th>Fecha Alta</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </div>
  </div>


  <div class="panel panel-success ">
    <div class="panel-heading">
      <h3 class="panel-title">
        Cola de impresi√≥n
      </h3>
    </div>
    <div class="panel-body">
    <div class="table-responsive">
        <table id="tabla-cola_impresion" class="table table-striped table-bordered table-hover" data-source = "<%= horas_index_cola_impresion_path(format: :json) %>" >
          <thead>
            <tr>
              <th>DNI</th>
              <th>Nombres</th>
              <th>Sit. Rev</th>
              <th>Horas</th>              
              <th>Ciclo</th>
              <th>Curso</th>
              <th>Div</th>
              <th>Turno</th>
              <th>Codif.</th>
              <th>Oblig</th>
              <th>Fecha Alta</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <%= link_to horas_imprimir_cola_path, :class => 'btn btn-primary' do %>
    <span class="glyphicon glyphicon-plus"></span>
    Imprimir
  <% end %>

</div>

<script type="text/javascript">
    $(document).ready(function($) {
      $('#tabla-horas_novedades').dataTable({
        language : {"sUrl": "<%= asset_path('language.es.json') %>",},
        processing : true,
        serverSide : true,
        ajax : $('#tabla-horas_novedades').data('source'),
        pagingType: "simple",
      });
      $('#tabla-cola_impresion').dataTable({
        language : {"sUrl": "<%= asset_path('language.es.json') %>",},
        processing : true,
        serverSide : true,
        ajax : $('#tabla-cola_impresion').data('source'),
        pagingType: "simple",
      });

        var date = new Date();
        $('#daterange').daterangepicker({
          format: 'DD/MM/YYYY',
          startDate: new Date(date.getFullYear(), date.getMonth(), 1),
          endDate: Date.today,
          minDate: '01/01/2015',
          maxDate: '31/12/2030',
          locale: {
            applyLabel: 'Ir',
            cancelLabel: 'Cancelar',
            fromLabel: 'Desde',
            toLabel: 'Hasta',
            firstDay: 1
          }
        });

        //Evento del apply
        $('#daterange').on('apply.daterangepicker', function(ev, picker) {
          //do something, like clearing an input
          //alert("Periodo seleccionado: "+$('#daterange').datepicker( "option", "maxDate" ));
          //open('<%= altas_bajas_horas_path %>');
          window.open ('<%= horas_index_novedades_path %>'+'?rango='+$('#daterange').val(),'_self',false)
        });

    });
</script>